webpackJsonp([8],{"0PhZ":function(t,e,i){"use strict";(function(t){function s(){this.CROP_DIALOG_TEMPLATE=u.a,this.TEXT_DIALOG_TEMPLATE=p.a,this.defaultAttrs({top:"20%",forcePublishSelector:".MomentMakerCropBeforePublishDialog-forcePublish",cropAllButtonSelector:".MomentMakerCropBeforePublishDialog-cropAll, .MomentMakerCropBeforePublishDialog-cellPlaceholder",cropImageButtonSelector:".MomentMakerCropBeforePublishDialog .MomentMakerCoverDialog-cell--image",publishButtonSelector:".MomentMakerTopBar-publishButton:not(.is-disabled)",cropAreaSelector:".MomentMakerCropOverlay-cropArea",mediaContainerSelector:".MomentMakerMediaContainer-mediaContainer",capsuleItemSelector:".MomentMakerPage-existingTweets .MomentCapsuleItem",titleTextSelector:".MomentCapsuleEditableMeta-title",descriptionTextSelector:".MomentCapsuleEditableMeta-description",emptyCoverSelector:".MomentMakerCapsuleCover-empty:visible",validationSubmitSelector:".js-momentValidationDialogSubmit",textEmptyClass:"is-empty"}),this.handleMomentValidation=function(){var t=this.getTitleDescriptionHtml()||this.getHasTweetHtml()||this.getCoverImageHtml()||this.getCropAllHtml();t?this.loadDialog(t):this.triggerPublish()},this.loadDialog=function(t){this.$node.html(t),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open()},this.triggerPublish=function(){this.closeImmediately(),this.trigger("uiMomentMakerTriggerVisibilityUpdate",{visibility_mode:"public"})},this.triggerForcePublish=function(){this.trigger("uiMomentMakerForcePublish"),this.triggerPublish()},this.getCoverImageHtml=function(){if(0!==t(this.attr.emptyCoverSelector).length)return this.renderTemplate({message:Object(c.default)("No cover yet! You need a cover before you can publish this moment. Choose from existing media or upload something new.")},p.a)},this.getTitleDescriptionHtml=function(){var e=t(this.attr.titleTextSelector).hasClass(this.attr.textEmptyClass),i=t(this.attr.descriptionTextSelector).hasClass(this.attr.textEmptyClass);return e?this.renderTemplate({message:Object(c.default)("No title yet! You need a title and description before you can publish this Moment.")},p.a):i?this.renderTemplate({message:Object(c.default)("No description yet! You need a title and description before you can publish this Moment.")},p.a):void 0},this.getHasTweetHtml=function(){if(0===t(this.attr.capsuleItemSelector).length)return this.renderTemplate({message:Object(c.default)("No Tweets yet! To begin building a Moment, start by adding Tweets.")},p.a)},this.hasValidCropData=function(t){return t.data("mobile-portrait-crop-height")&&t.data("mobile-portrait-crop-width")&&void 0!==t.data("mobile-portrait-crop-x")&&void 0!==t.data("mobile-portrait-crop-y")},this.mediaFilter=function(t){var e=t.closest(this.attr.mediaContainerSelector).find(this.attr.cropAreaSelector);return!0!==e.data("mobile-no-crop")&&!this.hasValidCropData(e)},this.getCropAllHtml=function(){var t=this.getMediaItems();if(t.length){var e=t.length-3,i={more_count:e,show_more_placeholder:e>0,items:t.slice(0,3)};return i["more_count_"+h.a.PluralRules.rule_for(i.more_count)]=!0,this.renderTemplate(i,u.a)}},this.triggerCropAll=function(t,e){this.closeImmediately(),this.trigger("uiMomentMakerCropAll")},this.triggerCropAllWithOffset=function(e,i){this.closeImmediately();var s=t(i.el).attr("data-media-id");this.trigger("uiMomentMakerCropAll",{mediaId:s})},this.renderTemplate=function(t,e){return e.render(t)},this.after("initialize",function(){this.on(this.attr.publishButtonSelector,"click",this.handleMomentValidation),this.on("click",{forcePublishSelector:this.triggerForcePublish,cropAllButtonSelector:this.triggerCropAll,cropImageButtonSelector:this.triggerCropAllWithOffset,validationSubmitSelector:this.close}),this.on(document,"uiMomentMakerCropAllCompleted",this.handleMomentValidation)})}var o=i("DBjh"),n=i("UHc7"),a=i("Ckw6"),r=i("QYwK"),l=i("ZVSr"),h=i.n(l),c=i("0d4m"),d=i("iaqp"),u=i.n(d),m=i("JZ0A"),p=i.n(m);e.a=Object(o.default)(r.a,a.a,n.a,s)}).call(e,i("4kSj"))},"2+UZ":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({buttonSelector:".MomentMakerActionButtons-button--remove",capsuleItemSelector:".MomentCapsuleItem"}),this.handleRemoveFailure=function(t,e){this.trigger("uiShowError",{message:Object(o.default)("Something went wrong. This Tweet couldn't be removed from this Moment right now. Give it a minute, then try again.")})},this.handleRemove=function(t,e){var i=this.$tweet.attr("data-tweet-id");this.$tweet.remove(),e={moment_id:this.attr.momentId,tweet_id:i},this.trigger("uiMomentMakerRemoveTweet",e)},this.openDialog=function(e,i){this.$tweet=t(e.target).closest(this.attr.capsuleItemSelector),this.trigger("uiMomentMakerOpenDeleteTweetDialog")},this.after("initialize",function(){this.on("click",{buttonSelector:this.openDialog}),this.on(document,"uiMomentMakerConfirmDelete",this.handleRemove),this.on(document,"dataMomentMakerRemoveTweetFailure",this.handleRemoveFailure)})}var o=i("0d4m"),n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"2RHn":function(t,e,i){"use strict";function s(){this.like=function(t,e){this.post({url:"/i/moments/like",data:e,success:"dataMomentLikeSuccess",error:function(t){this.trigger("dataMomentLikeError",{momentId:e.moment_id,data:t})}.bind(this)})},this.unlike=function(t,e){this.post({url:"/i/moments/unlike",data:e,success:"dataMomentUnlikeSuccess",error:function(t){this.trigger("dataMomentUnlikeError",{momentId:e.moment_id,data:t})}.bind(this)})},this.after("initialize",function(){this.on("uiLikeMoment",this.like),this.on("uiUnlikeMoment",this.unlike)})}var o=i("DBjh"),n=i("9np9"),a=i("VtWx");e.a=Object(o.default)(s,a.a,n.a)},"4ayK":function(t,e,i){"use strict";(function(t){function s(e){this.defaultAttrs({top:"20%",triggerSelector:".js-momentMakerPublishLocation",confirmButtonSelector:".js-confirm",checkboxSelector:".MomentDialog-toggleInput",topBarDropDownMenuSelector:".MomentMakerTopBarDropdownMenu",dataAttr:"data-publish-location",publishLocationSetting:!1}),this.before("openWhenTriggerClicked",function(){this.select("checkboxSelector").prop("checked",this.isChecked)}),this.confirm=function(){var t=this.select("checkboxSelector").is(":checked");this.isChecked!==t&&this.trigger("uiMomentMakerUpdatePublishLocation",{moment_id:this.attr.momentId,value:!!t,previous_value:!t}),this.updateCheckedValue(t),this.close()},this.handleError=function(t,e){this.trigger("uiShowError",{message:Object(a.default)("Something went wrong. Give it a minute, then try again.")}),this.updateCheckedValue(e.previous_value)},this.updateCheckedValue=function(e){t(this.attr.topBarDropDownMenuSelector).attr(this.attr.dataAttr,e),this.isChecked=e},this.after("initialize",function(){this.isChecked=this.attr.publishLocationSetting,this.on("click",{confirmButtonSelector:this.confirm}),this.on(document,"dataMomentMakerUpdatePublishLocationError",this.handleError)})}var o=i("DBjh"),n=i("UHc7"),a=i("0d4m");e.a=Object(o.default)(n.a,s)}).call(e,i("4kSj"))},"5ysP":function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiMomentsGuideCategoryClicked",{action:"click"})})}var o=i("DBjh"),n=i("3oDc");e.a=Object(o.default)(s,n.a)},"6jc5":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({previewImageSelector:".MomentMakerMediaInlinePreview-image",makerMediaItemSelector:".MomentMakerMediaContainer",mediaItemSelector:".MomentMediaItem",croppingItemSelector:".MomentMakerMediaContainer.is-cropping",croppingClass:"is-cropping",cropAreaSelector:".MomentMakerCropOverlay-cropArea",mediaSelector:".MomentMediaItem-entity",capsuleItemSelector:".MomentCapsuleItem",previewSelector:".MomentMakerMediaInlinePreview",maskSelector:".MomentMakerPage-mask",cancelButtonSelector:".js-cancelCrop",applyButtonSelector:".js-applyCrop",noCropCheckboxSelector:".MomentMakerMediaInlinePreview-noCrop",noCropClass:"no-crop",cropAllClass:"is-cropAllMode",croppableMediaSelector:".MomentMediaItem-entity:not(.MomentMediaItem-entity--audio)"}),this.isCropAllMode=function(){return this.$inlinePreview.hasClass(this.attr.cropAllClass)},this.endCrop=function(t){var e=this.select("croppingItemSelector"),i=this.isCropAllMode(),s=t&&i&&this.uncroppedMedia.length;this.trigger("uiMomentMakerTimelineCropEnd"),s?(this.disableCropping(e,t),e.removeClass(this.attr.croppingClass)):(this.unshiftContent(e),this.disableCropping(e,t)),t&&(e.find(this.attr.mediaSelector).trigger("uiMomentMakerUpdateCrop",this.getMediaCropData(e)),this.mediaHasNoCrop(e)&&this.trigger("uiMomentMakerTimelineSetNoCrop"),s?window.requestAnimationFrame(this.cropNextUncroppedMedia.bind(this)):i&&this.trigger("uiMomentMakerCropAllCompleted")),this.removeMaskedImage(e)},this.getMediaCropData=function(t){var e=t.find(this.attr.mediaSelector);return r({moment_id:this.attr.momentId,tweet_id:t.closest(this.attr.capsuleItemSelector).data("tweet-id"),media_id:e.data("media-id")},this.formatMediaCropPositionForAjax(t))},this.positionPreview=function(e){var i=e.closest(this.attr.capsuleItemSelector).position(),s=e.position();e.addClass(this.attr.croppingClass),this.$inlinePreview.css({top:s.top+i.top}),t("html, body").animate({scrollTop:e.offset().top-100},this.isCropAllMode()?400:200)},this.shiftContent=function(){var t=this;this.$node.addClass(this.attr.croppingClass),this.$node.animate({left:-100},200,function(){t.$inlinePreview.fadeIn(),t.$mask.fadeIn()})},this.unshiftContent=function(t){var e=this;this.$inlinePreview.fadeOut(100),this.$mask.fadeOut(100),this.$node.animate({left:0},function(){e.$node.removeClass(e.attr.croppingClass),t.removeClass(e.attr.croppingClass),e.isCropAllMode()&&(e.$inlinePreview.removeClass(e.attr.cropAllClass),e.uncroppedMedia=[])})},this.startCrop=function(e,i){this.cropMediaItem(t(e.target))},this.cropMediaItem=function(t){var e=this.mediaHasNoCrop(t);this.positionPreview(t),this.$noCropInput.prop("checked",e),this.$inlinePreview.toggleClass(this.attr.noCropClass,e),this.enableCropping(t,{cropMode:a.a.MobilePortrait.mode}),this.shiftContent()},this.onNoCropChange=function(t,e){this.$inlinePreview.toggleClass(this.attr.noCropClass,this.noCropEnabled()),this.updateNoCropState(this.select("croppingItemSelector"))},this.triggerCropAll=function(t,e){var i=e&&e.mediaId||null;this.$inlinePreview.addClass(this.attr.cropAllClass),this.uncroppedMedia=this.getUncroppedMedia(i),this.cropNextUncroppedMedia()},this.cropNextUncroppedMedia=function(){var t=this.uncroppedMedia.shift();t&&t.length&&this.cropMediaItem(t)},this.hasValidCropData=function(t){return t.data("mobile-portrait-crop-height")&&t.data("mobile-portrait-crop-width")&&void 0!==t.data("mobile-portrait-crop-x")&&void 0!==t.data("mobile-portrait-crop-y")},this.filterOutCroppedMedia=function(t){var e=t.find(this.attr.cropAreaSelector);return!0!==e.data("mobile-no-crop")&&!this.hasValidCropData(e)},this.getUncroppedMedia=function(e){var i=this,s=this.select("croppableMediaSelector").toArray().map(function(e){return t(e).closest(i.attr.makerMediaItemSelector)}).filter(this.filterOutCroppedMedia.bind(this)),o=s.map(function(t){return t.find(this.attr.mediaSelector).attr("data-media-id")},this),n=Math.max(0,o.indexOf(e));return s.slice(n).concat(s.slice(0,n))},this.after("initialize",function(){this.$inlinePreview=this.select("previewSelector"),this.uncroppedMedia=[],this.$mask=t(this.attr.maskSelector),this.on(document,"uiMomentMakerCropAll",this.triggerCropAll),this.on(document,"uiMomentMakerTimelineCropStart",this.startCrop),this.on(document,"click",{maskSelector:this.endCrop.bind(this,!1)}),this.on("click",{cancelButtonSelector:this.endCrop.bind(this,!1),applyButtonSelector:this.endCrop.bind(this,!0)}),this.on("change",{noCropCheckboxSelector:this.onNoCropChange})})}var o=i("DBjh"),n=i("N4rP"),a=i("FCTT"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(o.default)(n.a,s)}).call(e,i("4kSj"))},"7woe":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({makerMediaItemSelector:".MomentMakerCoverCropper-container",previewImageSelector:".MomentMakerCoverCropper .MomentMakerMediaInlinePreview-image",squarePreviewImageSelector:".MomentMakerCoverCropper .MomentMakerCoverCropper-squarePreview img",triggerSelector:".MomentMakerCapsuleCover .MomentMakerMediaActionButtons-button--crop",nextCropSelector:".MomentMakerCoverCropper-actions--nextCrop",saveCropSelector:".MomentMakerCoverCropper-actions--saveCrop",closeSelector:".MomentMakerCoverCropper-actions--cancelCrop",overlaySelector:".MomentMakerCoverCropper",pageSelector:".MomentMakerPage",existingCoverImageSelector:".MomentMakerCapsuleCover .MomentMediaItem-entity",cropAreaSelector:".MomentMakerCropOverlay-cropArea",cropImageSelector:".MomentMakerCoverCropper-imageContainer",croppingItemSelector:".MomentMakerCoverCropper-container",capsuleCoverSelector:".MomentMakerCapsuleCover",itemSelector:".MomentMediaItem",portraitClass:"is-portrait",landscapeClass:"is-landscape",noCropClass:"no-crop",hasCoverOverlayClass:"hasCoverOverlay",hasSmallImageClass:"hasSmallImage",extraOverlayHeight:246,minHeightForScrolling:500,croppingItemWidth:640}),this.showOverlay=function(){this.$page.addClass(this.attr.hasCoverOverlayClass),this.$overlay.show()},this.hideOverlay=function(){this.$page.removeClass(this.attr.hasCoverOverlayClass),this.$overlay.hide(),this.select("capsuleCoverSelector").find(this.attr.maskedImageSelector).empty()},this.onImageLoad=function(t){var e=t.get(0),i=e.height,s=e.width,o=s>i,n=o?this.attr.croppingItemWidth*i/s:this.attr.croppingItemWidth,a=o?this.attr.landcapeClass:this.attr.portraitClass,r=this.select("cropImageSelector");r.empty(),this.$overlay.css("minHeight",n+this.attr.extraOverlayHeight),this.$overlay.toggleClass(this.attr.hasSmallImageClass,n<this.attr.minHeightForScrolling),t.addClass(a),r.empty().append(t),this.showOverlay(),this.startSquareCrop()},this.showImage=function(){var e=this.select("existingCoverImageSelector").attr("data-preview-image-src"),i=t('<img class="MomentMakerCoverCropper-image"/>');i.on("load",this.onImageLoad.bind(this,i)),i.attr("src",e),this.$overlay.find(this.attr.cropAreaSelector).attr("data-preview-image-src",e),this.$squarePreview.attr("src",e)},this.clearMediaCropData=function(){this.select("capsuleCoverSelector").find(this.attr.cropAreaSelector).data({"mobile-no-crop":!1,height:"",width:"","mobile-portrait-crop-width":"","mobile-portrait-crop-height":"","mobile-portrait-crop-x":"","mobile-portrait-crop-y":"","square-crop-width":"","square-crop-height":"","square-crop-x":"","square-crop-y":""})},this.getMediaCropData=function(t,e){var i=this.select("existingCoverImageSelector"),s=i.closest(this.attr.itemSelector);return r({moment_id:this.attr.momentId,media_id:i.data("media-id"),tweet_id:s.data("tweet-id"),aspect_ratio:e},this.formatMediaCropPositionForAjax(t))},this.startSquareCrop=function(){this.$overlay.removeClass(this.attr.portraitClass),this.enableCropping(this.$coverPreview,{cropMode:a.a.Square.mode})},this.startPortraitCrop=function(){this.saveCrop(a.a.Square.aspectRatio),this.$overlay.addClass(this.attr.portraitClass),this.enableCropping(this.$coverPreview,{cropMode:a.a.MobilePortrait.mode})},this.saveCrop=function(t){var e=this.scaleFromTimelineToNative(this.$croppingItem);this.setNativeMediaCropPosition(this.$croppingItem,e),this.$croppingItem.trigger("uiMomentMakerSetCoverCrop",this.getMediaCropData(this.$croppingItem,t)),t===a.a.MobilePortrait.aspectRatio&&this.hideOverlay()},this.after("initialize",function(){this.momentId=this.attr.momentId,this.$page=this.select("pageSelector"),this.$overlay=this.select("overlaySelector"),this.$coverPreview=this.select("makerMediaItemSelector"),this.$squarePreview=this.select("squarePreviewImageSelector"),this.$croppingItem=this.select("croppingItemSelector"),this.on("click",{closeSelector:this.hideOverlay,nextCropSelector:this.startPortraitCrop,saveCropSelector:this.saveCrop.bind(this,a.a.MobilePortrait.aspectRatio)}),this.on(document,"dataMomentMakerSetCoverSuccess",this.clearMediaCropData),this.on(document,"uiMomentMakerHasNewCoverImage",this.showImage),this.on(document,"click",{triggerSelector:this.showImage})})}var o=i("DBjh"),n=i("N4rP"),a=i("FCTT"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},l=Object(o.default)(s,n.a);e.a=l}).call(e,i("4kSj"))},"9lih":function(t,e,i){"use strict";function s(t){Object(o.a)(t),t.moments.nuxTooltipsEnabled&&l.a.attachTo(".MomentGuideNavigation-createButton",{tooltipName:"moment_guide_create_moment_tooltip"}),a.a.attachTo(".AppContent"),r.a.attachTo(".MomentGuideNavigation"),h.a.attachTo(document),c.a.attachTo(".MomentsGuidePage-capsules"),d.a.attachTo(document),u.a.attachTo(document),n.a.setGlobalNavSelector(".MomentGuideNavigation")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var o=i("qVeo"),n=i("reQR"),a=i("5ysP"),r=i("rtvU"),l=i("g2cS"),h=i("mgMq"),c=i("WCRd"),d=i("OSHF"),u=i("U8+L")},AUHA:function(t,e,i){"use strict";function s(){this.defaultAttrs({momentOembedEndpoint:"//publish.twitter.com/oembed?url=https%3A%2F%2Ftwitter.com/i/moments/"}),this.getMomentOembed=function(t,e){this.get({dataType:"jsonp",url:this.attr.momentOembedEndpoint+e.momentId,data:{id:e.momentId},success:"dataMomentEmbedUrl"})},this.after("initialize",function(){this.on("uiMomentEmbedNeedsOembed",this.getMomentOembed)})}var o=i("DBjh"),n=i("VtWx");e.a=Object(o.default)(s,n.a)},Ckw6:function(t,e,i){"use strict";function s(){this.scaleFromTimelineToNative=function(t){return this.scaleCrop(this.getTimelineMediaCropPosition(t),this.getNativeMediaCropPosition(t))},this.scaleFromNativeToTimeline=function(t){var e=this.scaleCrop(this.getNativeMediaCropPosition(t),this.getTimelineMediaCropPosition(t));return this.isValidCropData(e)?e:this.getMediaDefaultCropSize(t)},this.scaleCrop=function(t,e){var i=e.imageWidth/t.imageWidth,s=t[this.currentCropMode]||{};return{x:s.x*i,y:s.y*i,width:s.width*i,height:s.height*i,imageWidth:e.imageWidth,imageHeight:e.imageHeight}},this.getTimelineMediaCropPosition=function(t){var e=t.find(this.attr.cropAreaSelector),i=t[0].getBoundingClientRect(),s=e[0].getBoundingClientRect(),o=e.position(),n={imageWidth:i.width,imageHeight:i.height};return n[this.currentCropMode]={x:o.left,y:o.top,width:s.width,height:s.height},n},this.setTimelineMediaCropPosition=function(t,e){t.find(this.attr.cropAreaSelector).css({left:e.x,top:e.y,width:e.width,height:e.height,position:"absolute"})},this.getExistingCropData=function(t){return{MOBILEPORTRAIT:{x:t.data("mobile-portrait-crop-x"),y:t.data("mobile-portrait-crop-y"),width:t.data("mobile-portrait-crop-width"),height:t.data("mobile-portrait-crop-height")},SQUARE:{x:t.data("square-crop-x"),y:t.data("square-crop-y"),width:t.data("square-crop-width"),height:t.data("square-crop-height")}}},this.isValidCropData=function(t){return t.height&&t.width&&void 0!==t.x&&void 0!==t.y},this.getPortraitCropSize=function(t){var e=t.width/t.height<this.aspectRatio.MOBILEPORTRAIT,i=void 0,s=void 0;return e?(s=t.width,i=s/this.aspectRatio.MOBILEPORTRAIT):(i=t.height,s=i*this.aspectRatio.MOBILEPORTRAIT),{x:(t.width-s)/2,y:0,width:s,height:i}},this.getSquareCropSize=function(t){var e=t.width<t.height,i=Math.min(t.width,t.height);return{x:e?0:(t.width-i)/2,y:e?(t.height-i)/2:0,width:i,height:i}},this.getMediaDefaultCropSize=function(t){var e=t[0].getBoundingClientRect();return"SQUARE"===this.currentCropMode?this.getSquareCropSize(e):this.getPortraitCropSize(e)},this.getNativeMediaCropPosition=function(t){var e=t.find(this.attr.cropAreaSelector),i=this.getExistingCropData(t.find(this.attr.cropAreaSelector)),s=e.data("width")||t.width(),n=e.data("height")||t.height();return o({},i,{imageWidth:s,imageHeight:n})},this.formatMediaCropPositionForAjax=function(t){var e=this.getNativeMediaCropPosition(t);return t.hasClass(this.attr.noCropClass)?{height:e.imageHeight,width:e.imageWidth,no_crop:!0}:{mobile_portrait_crop_x:e.MOBILEPORTRAIT.x,mobile_portrait_crop_y:e.MOBILEPORTRAIT.y,mobile_portrait_crop_width:e.MOBILEPORTRAIT.width,mobile_portrait_crop_height:e.MOBILEPORTRAIT.height,square_crop_x:e.SQUARE.x,square_crop_y:e.SQUARE.y,square_crop_width:e.SQUARE.width,square_crop_height:e.SQUARE.height,width:e.imageWidth,height:e.imageHeight}},this.setNativeMediaCropPosition=function(t,e){"MOBILEPORTRAIT"===this.currentCropMode?t.find(this.attr.cropAreaSelector).data({"mobile-no-crop":!1,"mobile-portrait-crop-x":e.x,"mobile-portrait-crop-y":e.y,"mobile-portrait-crop-width":e.width,"mobile-portrait-crop-height":e.height}):t.find(this.attr.cropAreaSelector).data({"mobile-no-crop":!1,"square-crop-x":e.x,"square-crop-y":e.y,"square-crop-width":e.width,"square-crop-height":e.height})},this.setNativeMediaNoCrop=function(t){t.find(this.attr.cropAreaSelector).data({"mobile-no-crop":!0,"mobile-portrait-crop-x":"","mobile-portrait-crop-y":"","mobile-portrait-crop-width":"","mobile-portrait-crop-height":""})}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s},"CsT+":function(t,e,i){"use strict";function s(){this.defaults={uploadType:"",fileNameTextSelector:".photo-file-name",alertEvent:"uiAlertBanner"},this.updateFileNameText=function(t,e){var i=this.truncate(e.fileName,18);this.select("fileNameSelector").val(e.fileName),this.select("fileNameTextSelector").text(i),this.trigger("uiFileNameReady",{fileName:i})},this.addFileError=function(t){var e=t===a.a.FILE_TOO_LARGE?this.attr.fileTooBigMessage:Object(n.a)(t);e&&this.trigger(this.attr.alertEvent,{message:e}),this.scribe({component:"profile_image",element:"upload",action:"failure"}),"function"==typeof this.attr.onError&&this.attr.onError(),this.reset()},this.truncate=function(t,e){if(t.length<=e)return t;var i=Math.ceil(e/2),s=Math.floor(e/2);return t.substr(0,i)+"â€¦"+t.substr(t.length-s,s)},this.initializeButton=function(){this.select("buttonSelector").prop("disabled",!1),this.updateAcceptedFormats()},this.resetUploader=function(){this.select("fileNameSelector").val(""),this.select("fileNameTextSelector").text(Object(h.default)("No file selected"))},this.after("initialize",function(){this.maxSizeInBytes=this.attr.maxSizeInBytes,this.initializeButton(),this.on(this.$node,"uiPreviewThumbnailShow",this.updateFileNameText),this.on("uiResetUploader",this.resetUploader)})}var o=i("DBjh"),n=i("YlCE"),a=i("JSdv"),r=i("40xB"),l=i("3oDc"),h=i("0d4m"),c=Object(o.default)(s,r.a,l.a);e.a=c},D61c:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("items",t,e,1),t,e,0,10,320,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <div\n    class="MomentMakerCoverDialog-cell MomentMakerCoverDialog-cell--image"\n    data-tweet-id="'),i.b(i.v(i.f("tweet_id",t,e,0))),i.b('"\n    data-media-id="'),i.b(i.v(i.f("media_id",t,e,0))),i.b('"\n    data-height="'),i.b(i.v(i.f("height",t,e,0))),i.b('"\n    data-width="'),i.b(i.v(i.f("width",t,e,0))),i.b('"\n    data-preview-image-src="'),i.b(i.v(i.f("preview_url",t,e,0))),i.b('"\n    style="background-image:url('),i.b(i.v(i.f("preview_url",t,e,0))),i.b(')">\n  </div>\n')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"DEQ+":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({top:"20%",triggerSelector:".js-deleteMoment",confirmDeleteSelector:".js-confirmDeleteMoment",momentCapsuleSelector:".MomentCapsuleSummary",momentId:void 0,deleteInline:!1}),this.onConfirmDeleteMoment=function(t,e){this.trigger("uiMomentMakerDeleteMoment",{moment_id:this.momentId})},this.onDeleteSuccess=function(e,i){if(this.attr.deleteInline){var s=this.attr.momentCapsuleSelector+'[data-moment-id="'+this.momentId+'"]';t(s).remove(),this.close(),this.momentId=void 0}else this.redirect(i.href)},this.onDeleteFailure=function(){this.momentId=void 0,this.close(),this.trigger("uiShowError",{message:Object(o.default)("Something went wrong. This Moment couldn't be deleted. Give it a minute, then try again.")})},this.redirect=function(t){location.href=t},this.before("openWhenTriggerClicked",function(e){this.momentId=this.attr.momentId||t(e.target).closest("[data-moment-id]").attr("data-moment-id")}),this.after("initialize",function(){this.on("click",{confirmDeleteSelector:this.onConfirmDeleteMoment}),this.on(document,"dataMomentMakerDeleteMomentSuccess",this.onDeleteSuccess),this.on(document,"dataMomentMakerDeleteMomentFailure",this.onDeleteFailure)})}var o=i("0d4m"),n=i("DBjh"),a=i("UHc7");e.a=Object(n.default)(a.a,s)}).call(e,i("4kSj"))},Dfow:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({bodySelector:".MomentAnalyticsDialog-body",cardSelector:".MomentAnalyticsDialog-card",dataSelector:".MomentAnalyticsDialog-data",maxTop:47,spinnerSelector:".MomentAnalyticsDialog-spinner",triggerSelector:".js-openMomentAnalytics"}),this.updatePopup=function(t,e){this.$spinner.hide(),this.$card.html(e.moment),this.$data.html(e.analytics),this.$modalBody.show(),this.trigger("uiMomentAnalyticsRendered")},this.resetAndClose=function(){this.reset(),this.close()},this.reset=function(){this.$spinner.show(),this.$modalBody.hide()},this.before("openWhenTriggerClicked",function(e){var i=t(e.currentTarget),s=i.attr("data-moment-id");this.trigger("uiMomentAnalyticsDialogOpened",{momentId:s}),this.scribe({component:"moment_analytics",action:"open"},this.getMomentScribeInfo(i))}),this.after("initialize",function(){this.$modalBody=this.select("bodySelector"),this.$card=this.select("cardSelector"),this.$data=this.select("dataSelector"),this.$spinner=this.select("spinnerSelector"),this.on(document,"dataLoadMomentAnalyticsSuccess",this.updatePopup),this.on(document,"uiDialogCloseRequested",this.reset),this.on(document,"dataLoadMomentAnalyticsFailure",this.resetAndClose)})}var o=i("DBjh"),n=i("UHc7"),a=i("Qs/v"),r=i("zvXx"),l=i("3oDc");e.a=Object(o.default)(n.a,r.a,a.a,l.a,s)}).call(e,i("4kSj"))},Dp5M:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({containerSelector:".MomentsPermalinkPage-tweets, .MomentMakerPage-content",tweetSelector:".MomentCapsuleItemTweet",iframeContainerSelector:".js-macaw-cards-iframe-container"}),this.loadCardsInMoment=function(){this.applyActionOnCardTweets(this.$pageContainer,this.createCard.bind(this))},this.destroyCardsInMomentContainer=function(e,i){this.applyActionOnCardTweets(t(i.containerSelector),this.destroyCard.bind(this))},this.applyActionOnCardTweets=function(e,i){var s=this;e.find(this.attr.iframeContainerSelector).each(function(e,o){var n=t(o).closest(s.attr.tweetSelector);i(n)})},this.after("initialize",function(){this.$pageContainer=this.select("containerSelector"),this.on("uiSwiftLoaded uiPageChanged uiMomentsHasInjectedNewItems",this.loadCardsInMoment),this.on("uiMomentsDestroyCardsInContainer",this.destroyCardsInMomentContainer)})}var o=i("DBjh"),n=i("dUMM");e.a=Object(o.default)(n.a,s)}).call(e,i("4kSj"))},EU29:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({makerMediaItemSelector:".MomentMakerMediaContainer",mediaEntitySelector:".MomentMediaItem-entity",capsuleItemSelector:".MomentCapsuleItem",cropSelector:".MomentMakerMediaActionButtons-button--crop"}),this.handleCrop=function(e){t(e.target).closest(this.attr.makerMediaItemSelector).trigger("uiMomentMakerTimelineCropStart",{cropMode:n.a.MobilePortrait.mode})},this.after("initialize",function(){this.on("click",{cropSelector:this.handleCrop})})}var o=i("DBjh"),n=i("FCTT");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},F2sH:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({itemSelector:".MomentCapsuleSummary",ctaSelector:".MomentCallToAction",defaultLinkSelector:".js-default-link"}),this.onCapsuleClick=function(e,i){if(this.isValidClickTarget(e)){var s=t(i.el).closest(this.attr.itemSelector),o=s.find(this.attr.defaultLinkSelector);this.trigger("uiMomentClicked",this.getMomentScribeInfo(o)),this.trigger("uiNavigate",{href:o.attr("href")})}},this.onDefaultLinkClick=function(e,i){var s=t(e.target);this.trigger("uiMomentClicked",this.getMomentScribeInfo(s))},this.onCtaClick=function(e){var i=t(e.target);this.trigger("uiMomentCtaClicked",this.getMomentScribeInfo(i))},this.isValidClickTarget=function(e){return 0===t(e.target).closest("a, button").length},this.after("initialize",function(){this.on("click",{itemSelector:this.onCapsuleClick,defaultLinkSelector:this.onDefaultLinkClick,ctaSelector:this.onCtaClick})})}var o=i("DBjh"),n=i("Qs/v");e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},FCTT:function(t,e,i){"use strict";var s={MobilePortrait:{mode:"MOBILEPORTRAIT",aspectRatio:"portrait"},Square:{mode:"SQUARE",aspectRatio:"square"}};e.a=s},"Hm+1":function(t,e,i){"use strict";function s(t){var e={momentId:t.moments.momentId};Object(n.a)(t),Object(a.a)(t),r.a.attachTo(".MomentMakerCoverDialog-cell--upload",{fileNameString:"moment[cover_image_name]",fileDataString:"moment[cover_image]",fileInputString:"moment[cover_image]",photoButtonSelector:".file-input",uploadType:"moment_cover",gifSupport:!0,videoSupport:!0,maxSizeInBytes:1024e4,alertEvent:"uiShowError",fileTooBigMessage:Object(o.default)("Please select an image that is less than 10MB."),eventData:{},formAuthenticityToken:t.formAuthenticityToken}),m.a.attachTo(document),I.a.attachTo(document),P.a.attachTo(".MomentMakerPage"),u.a.attachTo(".MomentCapsuleEditableMeta-title",{momentId:t.moments.momentId,textSelector:".rich-editor",maxLength:70,isRequired:!0,setFocusOnLoad:!0}),u.a.attachTo(".MomentCapsuleEditableMeta-description",{momentId:t.moments.momentId,textSelector:".rich-editor",maxLength:250}),l.a.attachTo(".MomentMakerPage-recommendedTweets",e),h.a.attachTo(".MomentMakerAddItemForm",{textSelector:".MomentMakerAddItemForm-input",momentId:t.moments.momentId}),d.a.attachTo(".MomentMakerCapsuleCover-media"),w.a.attachTo(".MomentMakerPage-existingTweets",e),C.a.attachTo(".MomentMakerPage-existingTweets",e),g.a.attachTo(".MomentMakerPage-existingTweets",e),p.a.attachTo(".MomentMakerPage-existingTweets",e),c.a.attachTo(document,e),f.a.attachTo(document),v.a.attachTo(".MomentMakerRecommendedCategories",e),M.a.attachTo(".MomentMakerRecommendations",{momentId:t.moments.momentId,userId:t.userId}),b.a.attachTo(document,e),T.a.attachTo(".MomentMakerRecommendedTweetsSearch--users",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead",allowAccountsWithoutAtSign:!0,allowIdenticalAccountToTriggerComplete:!0}),k.a.attachTo(".MomentMakerRecommendedTweetsSearch--users",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead",accountsShortcutShow:!0,parseHashflags:!0,typeaheadSrc:"MOMENTS",blockLinkActions:!0,datasourceRenders:[["accounts",["accounts"]]],deciders:$({},t.typeaheadData,{showSocialContext:!0}),eventData:{scribeContext:{component:"moment_maker_typeahead",element:"typeahead"}}}),T.a.attachTo(".MomentMakerRecommendedTweetsSearch--tweets",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead"}),k.a.attachTo(".MomentMakerRecommendedTweetsSearch--tweets",{inputSelector:".MomentMakerRecommendedTweetsSearch-typeahead",parseHashflags:!0,typeaheadSrc:"MOMENTS",blockLinkActions:!0,datasourceRenders:[["topics",["topics"]]],deciders:t.typeaheadData,eventData:{scribeContext:{component:"moment_maker_typeahead",element:"typeahead"}}}),S.a.attachTo(".MomentMakerSortMenu",{momentId:t.moments.momentId}),t.moments.nuxTooltipsEnabled&&y.a.attachTo(".MomentMakerTopBarDropdownMenu-button",{tooltipName:"moment_maker_more_menu_tooltip"}),D.a.attachTo("#moment-maker-cover-dialog",e),O.a.attachTo("#delete-moment-dialog",e),x.a.attachTo("#moment-maker-delete-tweet-dialog",e),E.a.attachTo("#moment-flag-nsfw-dialog",{momentId:t.moments.momentId,nsfwSetting:t.moments.nsfwSetting}),A.a.attachTo("#public-moment-warning"),A.a.attachTo("#moment-maker-disallow-publish-dialog"),j.a.attachTo("#moment-maker-publish-location-dialog",{momentId:t.moments.momentId,publishLocationSetting:t.moments.publishLocationSetting}),z.a.attachTo("#moment-publish-validation-dialog",e),B.a.attachTo("#moment-maker-theme-color-dialog",e),R.a.attachTo("#moment-maker-visibility-dialog",e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var o=i("0d4m"),n=i("qVeo"),a=i("Yumz"),r=i("CsT+"),l=i("UbWz"),h=i("JsZ6"),c=i("7woe"),d=i("mgxC"),u=i("mVIY"),m=i("lTdQ"),p=i("6jc5"),g=i("EU29"),f=i("tlYw"),v=i("TGFp"),M=i("LAaF"),b=i("fW86"),w=i("rp+5"),C=i("2+UZ"),S=i("xvkc"),y=i("g2cS"),k=i("cCv7"),T=i("aRgS"),I=i("L2G2"),P=i("LB/2"),D=i("SUM+"),O=i("DEQ+"),x=i("hUei"),E=i("T7dm"),A=i("fnUg"),j=i("4ayK"),z=i("0PhZ"),B=i("Lc2/"),R=i("aOTK"),$=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}},JZ0A:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var o=i("Opvs").default,n={"dialogs/close_button":i("38hD")},a=o(n),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal MomentMakerTextValidationDialog MomentDialog">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header MomentDialog-header">\n      <h3 class="modal-title">Your Moment is not ready!</h3>\n    </div>\n    <div class="modal-body">\n      <div class="MomentDialog-text">'),s.b(s.v(s.f("message",t,e,0))),s.b('</div>\n    </div>\n    <div class="modal-footer MomentDialog-footer">\n      <button class="EdgeButton EdgeButton--primary js-momentValidationDialogSubmit">Got it!</button>\n    </div>\n  </div>\n</div>\n'),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},JnjQ:function(t,e,i){"use strict";function s(){this.defaultAttrs({scribeInterval:6e4,page:void 0}),this.getTime=function(){return Date.now()},this.handleTweetsVisible=function(t,e){this.recordVisibleTweets(e.tweetData),e.cursorData&&this.recordVisibleCursors(e.cursorData)},this.recordVisibleCursors=function(t){var e=this,i={};t.forEach(function(t){e.visibleCursors[t.cursor]&&(e.previouslyVisibleCursors[t.cursor]=t.type),i[t.cursor]=t.type}),this.visibleCursors=i},this.recordVisibleTweets=function(t){var e={},i=this.getTime();t.forEach(function(t){this.visibleTweets[t.tweetId]?e[t.tweetId]=l({},this.visibleTweets[t.tweetId],{visibility_end:i}):e[t.tweetId]=l({},t,{visibility_start:i,visibility_end:i})},this),this.visibleTweetKeys().forEach(function(t){var i=this.visibleTweets[t],s=!e[t],o=i.visibility_start!==i.visibility_end;s&&o&&this.previouslyVisibleTweets.push(this.visibleTweets[t])},this),this.visibleTweets=e},this.flushVisibleTweets=function(t,e){var i=this.getTime();this.visibleTweetKeys().forEach(function(t){this.visibleTweets[t].visibility_end=i},this),this.recordVisibleTweets([]),this.scribeVisibilityResults()},this.onScribeVisibilityResults=function(t,e){e.page===this.attr.page&&(this.scribeVisibilityResults(),this.scribeCursorVisibilityResults())},this.scribeCursorVisibilityResults=function(){var t=this;if(Object.keys(this.previouslyVisibleCursors).length){var e={component:"tweet",element:"cursor",action:"impression"};Object.keys(this.previouslyVisibleCursors).forEach(function(i){t.previouslyScribedCursors[i]||(t.scribe(e,{event_info:t.previouslyVisibleCursors[i]}),t.previouslyScribedCursors[i]=!0)}),this.previouslyVisibleCursors={}}},this.scribeVisibilityResults=function(){if(this.previouslyVisibleTweets.length){var t={component:"stream",element:"linger",action:"results"},e={items:this.previouslyVisibleTweets.map(function(t){return this.interactionItem(t)},this)};this.previouslyVisibleTweets=[],this.scribe(t,e)}},this.visibleTweetKeys=function(){return Object.keys(this.visibleTweets).filter(function(t){return this.visibleTweets.propertyIsEnumerable(t)},this)},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.visibleTweets={},this.previouslyVisibleTweets=[],this.visibleCursors={},this.previouslyVisibleCursors={},this.previouslyScribedCursors={},this.pollingInterval=r.default.setIntervalEvent("uiScribeVisibilityResults",this.attr.scribeInterval,{page:this.attr.page}),this.on(document,"uiScribeVisibilityResults",this.onScribeVisibilityResults),this.on(document,"uiBeforePageChanged uiTeardown",this.flushVisibleTweets),this.on("uiTweetsVisible",this.handleTweetsVisible)})}var o=i("DBjh"),n=i("3oDc"),a=i("gcfh"),r=i("r8Bt"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(o.default)(s,n.a,a.a)},JsZ6:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({buttonSelector:".MomentMakerAddItemForm-button",inputSelector:".MomentMakerAddItemForm-input",existingTweetsListSelector:".MomentMakerPage-existingTweets",errorMessageSelector:".MomentMakerAddItemForm-error"}),this.getTweetId=function(){var t=l.exec(this.dom.$input.val());if(t&&t.length>0)return t[1]},this.onAddButtonClick=function(){var t=this.getTweetId();t&&this.trigger("uiMomentMakerAddTweet",{moment_id:this.attr.momentId,tweet_id:t,hydrate:!0,category:"urls",scribeData:r.a.scribeData({moment_id:this.attr.momentId,visibility:r.a.getMomentMakerTopBarVisibility()})})},this.onAddTweetSuccess=function(t,e){if(this.trigger("uiShowMessage",{message:Object(o.default)("Tweet successfully added.")}),this.dom.$input.val(""),e.html){var i=this.dom.$document.height()-this.dom.$window.scrollTop();this.dom.$existingTweetsList.append(e.html),this.dom.$existingTweetsList.trigger("uiMomentsHasInjectedNewItems"),this.dom.$window.scrollTop(this.dom.$document.height()-i)}},this.onTextChanged=function(){var t=this.getTweetId(),e=this.isExistingTweet(t),i=!!t&&!e,s=!this.dom.$input.val();t||s?e&&this.dom.$errorMessage.html(h.Duplicate):this.dom.$errorMessage.html(h.InvalidUrl),this.dom.$errorMessage.toggleClass("is-hidden",i||s),this.dom.$button.prop("disabled",!i||s)},this.isExistingTweet=function(t){return this.dom.$existingTweetsList.find('[data-tweet-id="'+t+'"]').length>0},this.after("initialize",function(){this.initTextNode(),this.dom={$button:this.select("buttonSelector"),$input:this.select("inputSelector"),$errorMessage:this.select("errorMessageSelector"),$existingTweetsList:t(this.attr.existingTweetsListSelector),$window:t(window),$document:t(document)},this.on("click",{buttonSelector:this.onAddButtonClick}),this.on("uiTextChanged",this.onTextChanged),this.on(document,"dataMomentMakerAddTweetSuccess",this.onAddTweetSuccess)})}var o=i("0d4m"),n=i("pUl/"),a=i("DBjh"),r=i("zm5j");e.a=Object(a.default)(s,n.a);var l=/.*twitter.com\/\w+\/status(?:es)?\/(\d+)/,h={InvalidUrl:Object(o.default)("Tweet must be a link from Twitter.com"),Duplicate:Object(o.default)("Tweet is already in this Moment")}}).call(e,i("4kSj"))},KfqD:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiMomentClicked",{action:"click"}),this.scribeOnEvent("uiMomentCtaClicked",{action:"click"}),this.scribeOnEvent("uiFollowMoment",{action:"follow"}),this.scribeOnEvent("uiUnfollowMoment",{action:"unfollow"}),this.scribeOnEvent("uiLikeMoment",{action:"like"}),this.scribeOnEvent("uiUnlikeMoment",{action:"unlike"}),this.scribeOnEvent("uiMomentShareViaTweet",{component:"share_moment",action:"open"}),this.scribeOnEvent("uiMomentShareViaDM",{component:"moment_capsule_menu",action:"share_via_dm"}),this.scribeOnEvent("uiMomentCopyLink",{component:"copy_link_to_moment",action:"open"}),this.scribeOnEvent("uiMomentEmbed",{component:"embed_moment",action:"open"})})}var o=i("DBjh"),n=i("3oDc");e.a=Object(o.default)(s,n.a)},KxkF:function(t,e,i){"use strict";(function(t){function s(){this.attributes({tolerancePixels:0}),this.checkScrollPosition=function(){!this.hasReachedPageBottom&&this.isPageBottomReached()&&(this.trigger("uiPageBottomReached"),this.hasReachedPageBottom=!0)},this.resetScrollWatcher=function(){this.hasReachedPageBottom=!1},this.isPageBottomReached=function(){return this.$window.scrollTop()+this.$window.height()>=this.$document.height()-this.attr.tolerancePixels},this.after("initialize",function(){this.$window=t(window),this.$document=t(document),this.hasReachedPageBottom=!1,this.on("scroll",n.default.throttle(this.checkScrollPosition.bind(this),10)),this.on("uiSwiftLoaded uiPageChanged",this.resetScrollWatcher)})}var o=i("DBjh"),n=i("YzIt"),a=Object(o.default)(s);e.a=a}).call(e,i("4kSj"))},Kxn0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function s(e){Object(o.a)(e),Object(n.a)(e),a.a.attachTo(".MomentsPermalinkPage-content"),r.a.attachTo(".MomentFloatingMenu"),l.a.attachTo(".MomentCapsuleLikesFacepile",{loggedIn:e.loggedIn}),h.a.attachTo("#moment-sensitive-content-dialog"),e.moments.showSensitiveContentWarning&&t(document).trigger("uiMomentShowSensitiveContentDialog"),c.a.attachTo(document),d.a.attachTo(".MomentCapsuleCover-media"),u.a.attachTo(document,{tolerancePixels:300}),m.a.attachTo(".MomentsPermalinkPage-tweets",{tweetSelector:".MomentCapsuleItem",eventData:e.eventData}),p.a.attachTo(".MomentsPermalinkPage-tweets",{page:"moments"})}e.default=s;var o=i("qVeo"),n=i("Yumz"),a=i("h0Yn"),r=i("ynl6"),l=i("Xida"),h=i("mjs/"),c=i("mgMq"),d=i("WCRd"),u=i("KxkF"),m=i("zAui"),p=i("JnjQ")}.call(e,i("4kSj"))},Kyl9:function(t,e,i){"use strict";function s(){this.loadAnalytics=function(t,e){this.get({url:"/i/moments/analytics_dialog",data:{moment_id:e.momentId},success:"dataLoadMomentAnalyticsSuccess",error:"dataLoadMomentAnalyticsFailure"})},this.after("initialize",function(){this.on(document,"uiMomentAnalyticsDialogOpened",this.loadAnalytics)})}var o=i("DBjh"),n=i("VtWx");e.a=Object(o.default)(s,n.a)},L2G2:function(t,e,i){"use strict";function s(){this.scribeUpdateVisibility=function(t,e,i){this.scribe({component:"visibility_dialog",element:i.visibility_mode,action:t},n.a.scribeData({moment_id:i.moment_id}))},this.scribeCropEvent=function(t){this.scribe({component:"moment_capsule",element:"media_crop",action:t})},this.scribeSetCoverEvent=function(t){this.scribe({component:"cover",element:"set",action:t})},this.scribeRecommendedTweetsEvent=function(t,e,i){this.scribe({component:"recommended_tweets",element:i.category,action:t},i&&i.scribeData)},this.after("initialize",function(){this.on("uiMomentMakerUpdateVisibilitySuccess",this.scribeUpdateVisibility.bind(this,"success")),this.on("uiMomentMakerUpdateVisibilityError",this.scribeUpdateVisibility.bind(this,"failure")),this.on(document,"uiMomentMakerTimelineCropStart",this.scribeCropEvent.bind(this,"start")),this.on(document,"uiMomentMakerTimelineCropEnd",this.scribeCropEvent.bind(this,"end")),this.on(document,"uiMomentMakerTimelineSetNoCrop",this.scribeCropEvent.bind(this,"none")),this.on(document,"dataMomentMakerUpdateCropSuccess",this.scribeCropEvent.bind(this,"success")),this.on(document,"dataMomentMakerUpdateCropFailure",this.scribeCropEvent.bind(this,"failure")),this.on(document,"uiMomentMakerSetCover",this.scribeSetCoverEvent.bind(this,"existing")),this.on(document,"uiMomentMakerSetCoverByMediaId",this.scribeSetCoverEvent.bind(this,"upload")),this.on(document,"uiMomentMakerCategorySelected",this.scribeRecommendedTweetsEvent.bind(this,"navigate")),this.on(document,"uiMomentMakerGetRecommendedTweets",this.scribeRecommendedTweetsEvent.bind(this,"get")),this.on(document,"uiMomentMakerGetRecommendedTweetsNoResults",this.scribeRecommendedTweetsEvent.bind(this,"no_results")),this.on(document,"dataMomentMakerGetRecommendedTweetsFailure",this.scribeRecommendedTweetsEvent.bind(this,"failure")),this.on(document,"uiMomentMakerRecommendedTweetsShowMore",this.scribeRecommendedTweetsEvent.bind(this,"more")),this.on(document,"uiMomentMakerAddTweet",this.scribeRecommendedTweetsEvent.bind(this,"add")),this.scribeOnEvent("uiMomentMakerCropAll",{component:"crop_before_publish_dialog",element:"crop_all",action:"click"}),this.scribeOnEvent("uiMomentMakerForcePublish",{component:"crop_before_publish_dialog",element:"force_publish_button",action:"click"}),this.scribeOnEvent("uiMomentMakerChangeCoverButtonClicked",{component:"cover",element:"set_button",action:"click"})})}var o=i("DBjh"),n=i("zm5j"),a=i("3oDc");e.a=Object(o.default)(s,a.a)},LAaF:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({countToShow:10,moreSelector:".MomentMakerRecommendations-more",containerSelector:".MomentMakerPage-recommendedTweets",userViewContainerSelector:".MomentMakerRecommendedTweetsSearch-userContainer",existingTweetsSelector:".MomentMakerPage-existingTweets .MomentCapsuleItem",capsuleItemSelector:".MomentCapsuleItem",playableMediaSelector:".PlayableMedia",typeaheadSelector:".MomentMakerRecommendedTweetsSearch-typeahead",tweetsSearchFormSelector:".MomentMakerRecommendedTweetsSearch--tweets .MomentMakerRecommendedTweetsSearch-form",tweetsSearchInputSelector:".MomentMakerRecommendedTweetsSearch--tweets .MomentMakerRecommendedTweetsSearch-typeahead",spinnerSelector:".spinner",messageSelector:".MomentMakerRecommendations-message"}),this.onCategorySelected=function(t,e){var i=e.category===this.state.activeCategory,s=e.category&&this.state.cachedTweets[e.category],o=s&&s.items||[],n=!!o.length;i&&n||(this.reset(),this.state.activeCategory=e.category,this.$node.attr("data-active-category",this.state.activeCategory),n?(this.showCachedTweets(),this.potentiallyShowUserView()):this.shouldRequestResults(e.category)&&(this.dom.$spinner.show(),this.trigger(document,"uiMomentMakerGetRecommendedTweets",e)))},this.onUserSearchEntryComplete=function(t,e){this.reset(),this.dom.$spinner.show();var i=e&&e.item&&e.item.id;this.state.typeaheadUserId=i,i&&this.trigger(document,"uiMomentMakerGetRecommendedTweets",{category:a.Tweets,user_id:i}),this.hideTypeahead()},this.onTweetsSearchEntryComplete=function(t,e){if(!this.isNonEnterKeypress(t)){this.reset(),this.dom.$spinner.show();var i=void 0;"uiTypeaheadItemComplete"===t.type?i=e.query:(t.preventDefault(),i=this.dom.$tweetsSearchInput.val()),i&&this.trigger(document,"uiMomentMakerGetRecommendedTweets",{category:a.Search,query:i})}},this.onGetRecommendedTweetsSuccess=function(t,e){this.reset(),e.html?(this.showNewTweets(e),this.potentiallyShowUserView()):(this.trigger("uiMomentMakerGetRecommendedTweetsNoResults",e),this.showErrorMessage(this.getSuccessErrorMessage(e)))},this.onGetRecommendedTweetsFailure=function(){this.reset(),this.showErrorMessage(r[this.state.activeCategory])},this.onClickMore=function(){var t=this.state.cachedTweets[this.state.activeCategory].items,e=this.state.cachedTweets[this.state.activeCategory].offset,i=Math.min(this.attr.countToShow+e,t.length);this.trigger("uiMomentMakerRecommendedTweetsShowMore",{category:this.state.activeCategory}),this.showTweets(t,i)},this.onDedupe=function(e,i){if(this.state.cachedTweets&&this.state.activeCategory&&this.state.cachedTweets[this.state.activeCategory]){var s=this.attr.capsuleItemSelector+"[data-tweet-id="+i.tweet_id+"]",o=this.state.cachedTweets[this.state.activeCategory].items,n=t("<div></div>").html(o);n.find(s).remove(),this.state.cachedTweets[this.state.activeCategory].items=t(n.html()),this.showCachedTweets()}},this.shouldRequestResults=function(t){return t===a.Likes||t===a.Suggestions||t===a.Tweets},this.showNewTweets=function(e){var i=t(e.html).filter(this.attr.capsuleItemSelector),s=Math.min(this.attr.countToShow,i.length);this.state.cachedTweets[e.category]={items:i,offset:s},this.state.activeCategory===e.category&&this.showTweets(i,s),e.userView&&this.dom.$userViewContainer.html(e.userView)},this.showCachedTweets=function(){var t=this.state.cachedTweets[this.state.activeCategory].items,e=this.state.cachedTweets[this.state.activeCategory].offset,i=Math.min(e,t.length);this.showTweets(t,i)},this.showTweets=function(t,e){this.reset(),this.dom.$container.html(t.slice(0,e)),this.state.cachedTweets[this.state.activeCategory].offset=e,this.updateMoreButton(),this.dom.$container.trigger("uiMomentsHasInjectedNewItems")},this.potentiallyShowUserView=function(){this.dom.$userViewContainer.toggle(this.state.activeCategory===a.Tweets)},this.showErrorMessage=function(t){t.length&&this.dom.$message.html(t).show()},this.filterTypeaheadEvents=function(t,e){return function(i,s){this.state.activeCategory===t&&e(i,s)}},this.hideTypeahead=function(){this.select("typeaheadSelector").blur().val("")},this.isNonEnterKeypress=function(t){return"keyup"===t.type&&(t.which||t.keyCode)!==h},this.updateMoreButton=function(){var t=this.state.activeCategory&&this.state.cachedTweets[this.state.activeCategory]||{},e=t.items||[],i=t.offset||0,s=e.length>i;this.dom.$moreButton.toggle(s)},this.reset=function(){this.dom.$container.trigger("uiMomentsHasRemovedItems"),this.dom.$container.find(this.attr.playableMediaSelector).removeClass("watched"),this.dom.$container.empty(),this.dom.$userViewContainer.hide(),this.dom.$moreButton.hide(),this.dom.$message.hide(),this.dom.$spinner.hide()},this.getSuccessErrorMessage=function(t){var e="";return this.state.activeCategory===a.Likes?e=l[a.Likes]:this.state.activeCategory===a.Search?e=l[a.Search]:this.state.activeCategory===a.Suggestions?e=this.getSuggestionsErrorMessage():this.state.activeCategory===a.Tweets&&(e=this.getTweetsErrorMessage(t)),e},this.getSuggestionsErrorMessage=function(){return t(this.attr.existingTweetsSelector).length>0?Object(n.default)("No Tweets to recommend yet. Add a few more Tweets to your Moment and we'll find something good!"):Object(n.default)("Add Tweets to this Moment and you'll see some recommended Tweets to add here.")},this.getTweetsErrorMessage=function(t){var e={user:t.fullName};return this.state.typeaheadUserId&&this.state.typeaheadUserId!==this.state.userId?t.isBlocked?Object(n.default)("You are blocked by {{user}} and cannot add {{user}}'s Tweets to this Moment.",e):t.isProtected?Object(n.default)("{{user}}'s Tweets are protected.",e):Object(n.default)("{{user}} hasn't Tweeted yet.",e):Object(n.default)("You haven't Tweeted yet. Once you do, you'll be able to use your Tweets in a Moment.")},this.after("initialize",function(){this.state={userId:this.attr.userId,activeCategory:null,typeaheadUserId:null,cachedTweets:{}},this.dom={$container:this.select("containerSelector"),$moreButton:this.select("moreSelector"),$userViewContainer:this.select("userViewContainerSelector"),$tweetsSearchForm:this.select("tweetsSearchFormSelector"),$tweetsSearchInput:this.select("tweetsSearchInputSelector"),$spinner:this.select("spinnerSelector"),$message:this.select("messageSelector")},this.on(document,"uiMomentMakerCategorySelected",this.onCategorySelected),this.on(document,"dataMomentMakerGetRecommendedTweetsSuccess",this.onGetRecommendedTweetsSuccess),this.on(document,"dataMomentMakerGetRecommendedTweetsFailure",this.onGetRecommendedTweetsFailure),this.on(document,"uiMomentMakerDedupeRecommendedTweets",this.onDedupe),this.on(this.dom.$moreButton,"click",this.onClickMore),this.on("uiTypeaheadItemComplete",this.filterTypeaheadEvents(a.Tweets,this.onUserSearchEntryComplete.bind(this))),this.on("uiTypeaheadItemComplete",this.filterTypeaheadEvents(a.Search,this.onTweetsSearchEntryComplete.bind(this))),this.on(this.dom.$tweetsSearchForm,"submit",this.onTweetsSearchEntryComplete),this.on(this.dom.$tweetsSearchInput,"keyup",this.onTweetsSearchEntryComplete)})}var o=i("DBjh"),n=i("0d4m");e.a=Object(o.default)(s);var a={Likes:"likes",Suggestions:"suggestions",Tweets:"tweets",Search:"search",Urls:"urls"},r={likes:Object(n.default)("Hmm, Tweets you've liked aren't loading right now. Try again."),suggestions:Object(n.default)("Hmm, recommended Tweets aren't loading right now. Try again."),tweets:Object(n.default)("Hmm, Tweets aren't loading right now. Try again."),search:Object(n.default)("Hmm, Tweets aren't loading right now. Try again.")},l={likes:Object(n.default)("You haven't liked any Tweets yet. When you like a Tweet, it will show up here and you can add it to a Moment."),search:Object(n.default)("This search did not return any Tweets. Try again.")},h=13}).call(e,i("4kSj"))},"LB/2":function(t,e,i){"use strict";function s(){this.defaultAttrs({momentFinishLaterSelector:".MomentMakerTopBar-finishLaterButton",momentDoneSelector:".MomentMakerTopBar-doneButton"}),this.scribeTopBarClick=function(t){this.scribe({component:"top_bar",element:t,action:"click"})},this.scribeVisibilityUpdate=function(t,e){this.scribe({component:"visibility_dialog",element:e.visibility_mode,action:"click"})},this.scribeDeleteClick=function(){this.scribe({component:"delete_dialog",element:"delete",action:"click"})},this.after("initialize",function(){this.on("click",{momentFinishLaterSelector:this.scribeTopBarClick.bind(this,"finish_later"),momentDoneSelector:this.scribeTopBarClick.bind(this,"done")}),this.on("uiMomentMakerDeleteMoment",this.scribeDeleteClick),this.on("uiMomentMakerUpdateVisibility",this.scribeVisibilityUpdate)})}var o=i("DBjh"),n=i("3oDc");e.a=Object(o.default)(s,n.a)},"Lc2/":function(t,e,i){"use strict";(function(t){function s(e){this.defaultAttrs({top:"20%",triggerSelector:".js-setMomentMakerSetThemeColor",momentId:void 0,topBarDropDownMenuSelector:".MomentMakerTopBarDropdownMenu",topBarDropDownSubtextSelector:".MomentMakerTopBarDropdownMenu-subtext--color",colorButtonSelector:".MomentMakerThemeColorDialog-color",confirmButtonSelector:".js-confirm",selectedSelector:".is-selected",selectedClass:"is-selected",themeColorAttr:"data-theme-color"}),this.onSelectColor=function(e){this.select("selectedSelector").removeClass(this.attr.selectedClass),t(e.target).addClass(this.attr.selectedClass)},this.onConfirm=function(){var t=this.select("selectedSelector").attr(this.attr.themeColorAttr);this.state.currentColor!==t&&(this.trigger("uiMomentMakerUpdateThemeColor",{moment_id:this.attr.momentId,value:t,previous_value:this.state.currentColor}),this.updateState(t)),this.close()},this.onSuccess=function(t,e){this.trigger("uiShowMessage",{message:Object(a.default)("Moment theme color updated successfully.")})},this.onError=function(t,e){this.trigger("uiShowError",{message:Object(a.default)("Something went wrong. Give it a minute, then try again.")}),this.updateState(e.previous_value)},this.updateState=function(e){t(this.attr.topBarDropDownMenuSelector).attr("data-has-theme",!!e),t(this.attr.topBarDropDownSubtextSelector).css({backgroundColor:e}),this.state.currentColor=e},this.after("initialize",function(){this.state={},this.state.currentColor=this.select("selectedSelector").attr(this.attr.themeColorAttr),this.on("click",{colorButtonSelector:this.onSelectColor,confirmButtonSelector:this.onConfirm}),this.on(document,"dataMomentMakerUpdateThemeColorSuccess",this.onSuccess),this.on(document,"dataMomentMakerUpdateThemeColorError",this.onError)})}var o=i("DBjh"),n=i("UHc7"),a=i("0d4m");e.a=Object(o.default)(n.a,s)}).call(e,i("4kSj"))},N4rP:function(t,e,i){"use strict";function s(){n.default.mixin(this,[r.a,l.a]),this.aspectRatio={MOBILEPORTRAIT:9/16,SQUARE:1},this.defaultAttrs({draggableClass:"ui-draggable",resizableClass:"ui-resizable",throttleInterval:16,overlayHandleLength:25,overlayHandleSelector:".MomentMakerCropOverlay-cropArea .ui-resizable-handle"}),this.enableCropping=function(t,e){this.currentCropMode=e.cropMode;var i=t.find(this.attr.cropAreaSelector);this.displayMaskedImage(t),this.initializeDraggable(i),this.initializeResizable(i),this.setTimelineMediaCropPosition(t,this.scaleFromNativeToTimeline(t)),this.setAspectRatio(i,this.aspectRatio[e.cropMode]),this.setPreviewSrc(t),this.updateNoCropState(t),this.showPreview(),this.enableDragging(t),this.enableResizing(t)},this.disableCropping=function(t,e){this.disableDragging(t),this.disableResizing(t),e&&this.noCropEnabled()?this.setNativeMediaNoCrop(t):e&&this.setNativeMediaCropPosition(t,this.scaleFromTimelineToNative(t))},this.initializeDraggable=function(t){t.draggable({containment:"parent",scroll:!1,drag:this.updatePreviewThrottled})},this.initializeResizable=function(t){t.resizable({containment:"parent",aspectRatio:!0,handles:"ne,se,sw,nw",minHeight:2*this.attr.overlayHandleLength,resize:this.updatePreviewThrottled})},this.updateNoCropState=function(t){var e=this.noCropEnabled();t.toggleClass(this.attr.noCropClass,e),e||this.currentCropMode||(this.currentCropMode="MOBILEPORTRAIT"),this.setPreviewPosition(t)},this.hasDraggable=function(t){return t.hasClass(this.attr.draggableClass)},this.hasResizable=function(t){return t.hasClass(this.attr.resizableClass)},this.enableDragging=function(t){t.find(this.attr.cropAreaSelector).draggable("enable")},this.disableDragging=function(t){t.find(this.attr.cropAreaSelector).draggable("disable")},this.enableResizing=function(t){t.find(this.attr.cropAreaSelector).resizable("enable")},this.disableResizing=function(t){t.find(this.attr.cropAreaSelector).resizable("disable")},this.setAspectRatio=function(t,e){t.resizable("option","aspectRatio",e)},this.noCropEnabled=function(){return this.$noCropInput.is(":checked")},this.mediaHasNoCrop=function(t){return t.find(this.attr.cropAreaSelector).data("mobile-no-crop")},this.after("initialize",function(){this.$noCropInput=this.select("noCropCheckboxSelector"),this.updatePreviewThrottled=a.default.throttle(this.updatePreview.bind(this),this.attr.throttleInterval)})}var o=i("bnyz"),n=(i.n(o),i("q9/C")),a=i("YzIt"),r=i("vAT2"),l=i("Ckw6");e.a=s},NPjf:function(t,e,i){"use strict";function s(){this.verifyUploadType=function(t){return function(e,i){if(i&&(i.uploadType||i.sourceEventData&&i.sourceEventData.uploadType)===this.attr.uploadType)return t.apply(this,arguments)}}}e.a=s},OSHF:function(t,e,i){"use strict";function s(){this.defaultAttrs({createButtonSelector:".js-createMoment"}),this.createMoment=function(){this.trigger("uiMomentMakerCreateMoment")},this.after("initialize",function(){this.on("click",{createButtonSelector:this.createMoment})})}var o=i("DBjh");e.a=Object(o.default)(s)},Ohd0:function(t,e,i){"use strict";(function(t){function s(){this.attributes({capsuleItemSelector:".MomentCapsuleItem",tweetSelector:".MomentCapsuleItemTweet",quotedTweetSelector:".QuoteTweet-innerContainer",imageContainerSelector:'.MomentMediaItem[data-source-type="image"]',imageEntitySelector:".MomentMediaItem-entity--image",linkCtaSelector:".MomentFormatLink",croppingSelector:".MomentMakerMediaContainer.is-cropping"}),this.openPermalinkOverlay=function(e,i){var s=t(e.target);if(!(s.closest("a, button").length>0)){var o=void 0,n=void 0,a=s.closest(this.attr.quotedTweetSelector);if(a.length>0)o=a.attr("href"),n=a.data("conversation-id");else{var r=s.closest(this.attr.tweetSelector);o=r.data("permalink-path"),n=r.data("conversation-id")}this.trigger("uiOverlayNavigate",{href:o,conversation_id:n})}},this.openMediaViewer=function(e,i){var s=t(e.target);if(!s.closest(this.attr.croppingSelector).length){var o=s.closest(this.attr.imageContainerSelector).find(this.attr.imageEntitySelector);this.trigger(o,"uiOpenGallery",{timelineSelector:this.attr.capsuleItemSelector})}},this.after("initialize",function(){this.on("click",{tweetSelector:this.openPermalinkOverlay,imageContainerSelector:this.openMediaViewer,linkCtaSelector:"uiMomentFormatLinkClick"})})}var o=i("DBjh");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},Q26E:function(t,e,i){"use strict";(function(t){function s(){this.viewportHelpers=n.a,this.utils=a.default,this.defaultAttrs({audioPlayerContainerSelector:".MomentMediaItem-entity--audio",audioPlayerLoadedClass:"is-loaded",loadThreshold:500,scrollThrottle:100}),this.processMedia=function(){var e=this;this.$mediaContainers.each(function(i,s){var o=t(s),a=n.a.isWithinBounds(e.$window,o,e.attr.loadThreshold),r=o.hasClass(e.attr.audioPlayerLoadedClass);!r&&a?o.trigger("uiAudioPlayerLoadIframe"):r&&!a&&o.trigger("uiAudioPlayerUnloadIframe")})},this.after("initialize",function(){this.$window=t(window),this.$mediaContainers=this.select("audioPlayerContainerSelector"),this.throttledProcessMedia=a.default.throttle(this.processMedia.bind(this),this.attr.scrollThrottle),this.on(this.$window,"resize",this.throttledProcessMedia),this.on(document,"uiSwiftLoaded uiPageChanged scroll",this.throttledProcessMedia)})}var o=i("DBjh"),n=i("/LRg"),a=i("YzIt");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},QYwK:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({tweetsWithMediaSelector:".MomentCapsuleItem--withMedia",mediaSelector:".MomentMakerPage-existingTweets .MomentMediaItem-entity:not(.MomentMediaItem-entity--audio)"}),this._mediaFilter=function(t){return"function"!=typeof this.mediaFilter||this.mediaFilter(t)},this.getMediaItems=function(){return t(this.attr.mediaSelector).toArray().map(function(e){return t(e)}).filter(this._mediaFilter.bind(this)).map(this.getDataForImage.bind(this))},this.getDataForImage=function(t){var e=t.closest(this.attr.tweetsWithMediaSelector),i=t.height(),s=t.width();return{moment_id:this.attr.momentId,media_id:t.data("media-id"),preview_url:t.data("preview-image-src"),alt_text:t.attr("alt"),height:i,width:s,tweet_id:e.data("tweet-id")}}}e.a=i}).call(e,i("4kSj"))},"Qs/v":function(t,e,i){"use strict";function s(){this.getMomentScribeData=function(t){var e={impression_id:o.a.getClosestAttr(t,"data-guide-impression-id")},i={guide_category_id:o.a.getClosestAttr(t,"data-guide-category-id")},s={moment_id:o.a.getClosestAttr(t,"data-moment-id")},a={navigation_uri:o.a.getClosestAttr(t,"href")},r={visibility:o.a.getClosestAttr(t,"data-moment-visibility")},l=n({},e,i,s,a,r);for(var h in l)void 0===l[h]&&delete l[h];return o.a.scribeData(l)},this.getMomentScribeInfo=function(t){return{scribeData:this.getMomentScribeData(t),scribeContext:{component:o.a.getClosestAttr(t,"data-component-context"),element:o.a.getClosestAttr(t,"data-element-context")}}}}var o=i("zm5j"),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s},Qw78:function(t,e,i){"use strict";function s(){this.defaultAttrs({shareUrlSelector:".MomentShareDialog-url",embedHelpUrl:"https://dev.twitter.com/web/embedded-moments"}),this.showCopyLinkView=function(t,e){var i={url:e.momentUrl};this.updateDialog(h.a,i)},this.showEmbedLoadingView=function(t,e){var i={is_loading:!0};this.updateDialog(r.a,i),this.trigger("uiMomentEmbedNeedsOembed",{momentId:e.momentId})},this.showEmbedView=function(t,e){e=e||{};var i={url:e.html,help_url:this.attr.embedHelpUrl,is_loading:!1};this.updateDialog(r.a,i)},this.selectContent=function(){this.$dialog.find("textarea").select()},this.updateDialog=function(t,e){var i=t.render(e);this.$dialog.find(this.attr.modalContentSelector).html(i),this.selectContent(),this.$dialog.trigger("uiDialogContentChanged"),this.open()},this.after("initialize",function(){this.on("click",{shareUrlSelector:this.selectContent}),this.on(document,"uiMomentCopyLink",this.showCopyLinkView),this.on(document,"uiMomentEmbed",this.showEmbedLoadingView),this.on(document,"dataMomentEmbedUrl",this.showEmbedView)})}var o=i("DBjh"),n=i("UHc7"),a=i("q1hc"),r=i.n(a),l=i("qDMi"),h=i.n(l);e.a=Object(o.default)(s,n.a)},"SUM+":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({saveSelector:".js-confirmSaveCover",noMediaMessageSelector:".MomentMakerCoverDialog-noMediaMessage",imagePreviewSelector:".MomentMakerCoverDialog-cell--image",containerSelector:".MomentMakerCoverDialog-imageGridImages",hasSensitiveMediaDataAttr:"is-sensitive-media",itemSelector:".MomentMediaItem",uploadType:"moment_cover"}),this.displayPreviews=function(){var t=this.getMediaItems(),e=c.a.render({items:t});this.$noMediaMessage.toggle(!t.length),this.$container.html(e),this.open()},this.mediaFilter=function(t){return!t.closest(this.attr.itemSelector).data(this.attr.hasSensitiveMediaDataAttr)},this.setActivePreview=function(e){this.$selectedImage=t(e.target).closest(this.attr.imagePreviewSelector),this.select("imagePreviewSelector").removeClass("selected"),this.$selectedImage.addClass("selected"),this.$saveButton.prop("disabled",!1)},this.saveCover=function(t,e){var i={moment_id:this.momentId,height:Math.round(this.$selectedImage.data("height")),width:Math.round(this.$selectedImage.data("width")),tweet_id:this.$selectedImage.data("tweet-id")},s=this.$selectedImage.data("media-id");s&&(i.media_id=s),this.trigger("uiMomentMakerSetCover",i)},this.getImageFromUpload=function(t,e){var i=n.a.update(e.fileId,{momentId:this.momentId});t.preventDefault(),i&&(this.trigger("uiMomentMakerSetCoverByMediaId",i),this.close())},this.after("initialize",function(){this.momentId=this.attr.momentId,this.$selectedImage=null,this.$saveButton=this.select("saveSelector"),this.$container=this.select("containerSelector"),this.$noMediaMessage=this.select("noMediaMessageSelector"),this.on("click",{saveSelector:this.saveCover,imagePreviewSelector:this.setActivePreview}),this.on(document,"uiFileSelected",this.verifyUploadType(this.getImageFromUpload)),this.on(document,"dataMomentMakerSetCoverSuccess",this.close),this.on(document,"uiMomentMakerChangeCoverButtonClicked",this.displayPreviews)})}var o=i("DBjh"),n=i("H6fk"),a=i("UHc7"),r=i("QYwK"),l=i("NPjf"),h=i("D61c"),c=i.n(h),d=Object(o.default)(s,a.a,r.a,l.a);e.a=d}).call(e,i("4kSj"))},T7dm:function(t,e,i){"use strict";(function(t){function s(e){this.defaultAttrs({top:"20%",triggerSelector:".js-setMomentNSFWStatus",confirmButtonSelector:".js-confirm",checkboxSelector:".MomentDialog-toggleInput",topBarDropDownMenuSelector:".MomentMakerTopBarDropdownMenu",nsfwSetting:!1}),this.before("openWhenTriggerClicked",function(){this.select("checkboxSelector").prop("checked",this.isChecked)}),this.confirm=function(){var t=this.select("checkboxSelector").is(":checked");this.isChecked!==t&&this.trigger("uiMomentMakerUpdateNSFW",{moment_id:this.attr.momentId,value:!!t,previous_value:!t}),this.updateCheckedValue(t),this.close()},this.handleError=function(t,e){this.trigger("uiShowError",{message:Object(a.default)("Something went wrong. Give it a minute, then try again.")}),this.updateCheckedValue(e.previous_value)},this.updateCheckedValue=function(e){t(this.attr.topBarDropDownMenuSelector).attr("data-nsfw-moment",e),this.isChecked=e},this.after("initialize",function(){this.isChecked=this.attr.nsfwSetting,this.on("click",{confirmButtonSelector:this.confirm}),this.on(document,"dataMomentMakerUpdateNSFWError",this.handleError)})}var o=i("DBjh"),n=i("UHc7"),a=i("0d4m"),r=Object(o.default)(n.a,s);e.a=r}).call(e,i("4kSj"))},TGFp:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({categorySelector:".MomentMakerRecommendedCategories-item",likesSelector:'.MomentMakerRecommendedCategories-item[data-recommended-category="likes"]',buttonSelector:".MomentMakerRecommendedCategories-target",activeClass:"is-active",userColorTextClass:"u-textUserColor"}),this.onCategoryClick=function(e){var i=t(e.target).closest(this.attr.categorySelector);this.showCategory(i)},this.showLikesCategory=function(){var t=this.select("likesSelector");this.showCategory(t)},this.showCategory=function(t){var e=t.data("recommended-category");this.$allCategories.removeClass(this.attr.activeClass),this.$allButtons.removeClass(this.attr.userColorTextClass),t.addClass(this.attr.activeClass),t.find(this.attr.buttonSelector).addClass(this.attr.userColorTextClass),this.trigger(document,"uiMomentMakerCategorySelected",{category:e})},this.after("initialize",function(){this.$allCategories=this.select("categorySelector"),this.$allButtons=this.select("buttonSelector"),this.on("click",{categorySelector:this.onCategoryClick}),this.on(document,"uiSwiftLoaded uiPageChanged",this.showLikesCategory)})}var o=i("DBjh"),n=i("VtWx");e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},UbWz:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({buttonSelector:".MomentMakerActionButtons-button--add",capsuleItemSelector:".MomentCapsuleItem",existingTweetsListSelector:".MomentMakerPage-existingTweets",recommendationsContainerSelector:".MomentMakerRecommendations",playableMediaSelector:".PlayableMedia",capsuleItemMargin:80}),this.onAddButtonClick=function(e,i){var s=t(e.target).closest(this.attr.capsuleItemSelector),n=s.attr("data-tweet-id");this.isExistingTweet(n)?this.trigger("uiShowError",{message:Object(o.default)("Tweet is already in this Moment")}):this.trigger("uiMomentMakerAddTweet",{moment_id:this.attr.momentId,tweet_id:n,category:this.getCurrentCategory(),scribeData:a.a.scribeData({moment_id:this.attr.momentId,visibility:a.a.getMomentMakerTopBarVisibility()})})},this.onAddTweetFailure=function(){this.trigger("uiShowError",{message:Object(o.default)("Something went wrong. This Tweet couldn't be added to this Moment right now. Give it a minute, then try again.")})},this.onAddTweetSuccess=function(t,e){var i=this.getCapsuleItem(e.tweet_id),s=this.dom.$window.scrollTop(),o=i.height()+this.attr.capsuleItemMargin;this.dom.$existingTweetsList.append(i.clone()),this.trigger("uiMomentMakerDedupeRecommendedTweets",e),this.dom.$window.scrollTop(s+o)},this.getCapsuleItem=function(t){var e=this.attr.capsuleItemSelector+"[data-tweet-id="+t+"]",i=this.$node.find(e);return i.find(this.attr.playableMediaSelector).removeClass("watched playable-media-loaded"),i},this.getCurrentCategory=function(){return this.dom.$recommendationsContainer.attr("data-active-category")},this.isExistingTweet=function(t){return this.dom.$existingTweetsList.find('[data-tweet-id="'+t+'"]').length>0},this.after("initialize",function(){this.dom={$window:t(window),$existingTweetsList:t(this.attr.existingTweetsListSelector),$recommendationsContainer:t(this.attr.recommendationsContainerSelector)},this.on("click",{buttonSelector:this.onAddButtonClick}),this.on(document,"dataMomentMakerAddTweetSuccess",this.onAddTweetSuccess),this.on(document,"dataMomentMakerAddTweetFailure",this.onAddTweetFailure)})}var o=i("0d4m"),n=i("DBjh"),a=i("zm5j");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},V2DB:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({shareTweetSelector:".js-momentShareTweet",shareDMSelector:".js-momentShareDM",copyMomentSelector:".js-copyMomentLink",embedMomentSelector:".js-embedMoment"}),this.onShareViaTweetClick=function(e,i){var s=t(i.el);this.triggerShareViaTweet(e,{url:s.attr("data-moment-url"),title:s.attr("data-moment-title"),author:s.attr("data-moment-author")})},this.triggerShareViaTweet=function(t,e){var i={title:e.title,author:e.author,url:e.url,newline:"\n"},s=void 0;s=e.author?Object(o.default)(" âš¡ï¸ â€œ{{title}}â€ by @{{author}}{{newline}}{{newline}}{{url}}",i):Object(o.default)(" âš¡ï¸ â€œ{{title}}â€{{newline}}{{newline}}{{url}}",i);var n={canTweetDefaultText:!0,cursorPosition:0,defaultText:s,title:Object(o.default)("Share this Moment")};this.trigger("uiMomentShareViaTweet"),this.trigger("uiOpenTweetDialog",n)},this.onShareViaDMClick=function(e,i){var s=t(i.el),o=s.attr("data-moment-url"),n=s.attr("data-moment-title");this.trigger("uiComposeNewDMWithOptions",{defaultComposerText:" âš¡ï¸ "+n+" "+o}),this.trigger("uiMomentShareViaDM")},this.onCopyMomentClick=function(e,i){var s=t(i.el).attr("data-moment-url");this.trigger("uiMomentCopyLink",{momentUrl:s})},this.onEmbedMomentClick=function(e,i){var s=t(i.el).attr("data-moment-id");this.trigger("uiMomentEmbed",{momentId:s})},this.after("initialize",function(){this.on("click",{shareTweetSelector:this.onShareViaTweetClick,shareDMSelector:this.onShareViaDMClick,copyMomentSelector:this.onCopyMomentClick,embedMomentSelector:this.onEmbedMomentClick}),this.on(document,"uiMomentsOpenShareViaTweetDialog",this.triggerShareViaTweet)})}var o=i("0d4m"),n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},WCRd:function(t,e,i){"use strict";(function(t){function s(){this.attributes({sportsScoresSelector:".MomentSportsScores[data-sport-id]:not([data-event-completed])",sportsScoresContentSelector:".MomentSportsScores-contentWrapper"}),this.handleUpdateSportsScoresUI=function(e,i){var s=this;this.select("sportsScoresSelector").map(function(e,o){var n=t(o),a=n.attr("data-sport-id");n.find(s.attr.sportsScoresContentSelector).fadeOut(1e3,function(){t(this).html(i[a]).fadeIn(1e3)})})},this.getSportIds=function(){this.sportIds=this.select("sportsScoresSelector").map(function(){return t(this).attr("data-sport-id")}).get()},this.after("initialize",function(){this.getSportIds(),0!==this.sportIds.length&&this.trigger(document,"dataMomentSetupSportsScores",{sportIds:this.sportIds}),this.on(document,"uiUpdateSportsScores",this.handleUpdateSportsScoresUI)})}var o=i("DBjh");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},Xida:function(t,e,i){"use strict";(function(t){function s(){this.attributes({rawCountAttr:"data-raw-count",countNumSelector:".MomentCapsuleLikesFacepile-countNum",countButtonSelector:".MomentCapsuleLikesFacepile-count",momentIdAttr:"data-moment-id",loggedIn:!1}),this._getCount=function(){var t=this.select("countNumSelector").attr(this.attr.rawCountAttr);if(t)return parseInt(t,10)},this._setCount=function(t){var e=t<0?0:t,i=r.format(e),s=this.select("countNumSelector");s&&(s.attr(this.attr.rawCountAttr,e),s.html(i))},this.incrementLikeCount=function(){this._setCount(this._getCount()+1)},this.decrementLikeCount=function(){this._setCount(this._getCount()-1)},this.requestUserLikesPopup=function(e,i){var s=t(e.target),o=s.closest("["+this.attr.momentIdAttr+"]").attr(this.attr.momentIdAttr);this.trigger("uiRequestActivityPopup",{contentId:o,component:"like_moment_popup"})},this.uiOpenSignupDialog=function(t,e,i){this.trigger("uiOpenSignupDialog"),this.trigger("uiLoggedOutActionAttempt",{action:"moment_liked_activity_attempt"})},this.after("initialize",function(){this.on(document,"dataMomentLikeSuccess",this.incrementLikeCount),this.on(document,"dataMomentUnlikeSuccess",this.decrementLikeCount),this.on("click",{countButtonSelector:this.attr.loggedIn?this.requestUserLikesPopup:this.uiOpenSignupDialog})})}var o=i("DBjh"),n=i("ZVSr"),a=i.n(n),r=new a.a.DecimalFormatter;e.a=Object(o.default)(s)}).call(e,i("4kSj"))},YH6O:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.on("uiDropdownOpenRequested","uiMomentDropdownMenuOpen")})}var o=i("DBjh"),n=i("mGri");e.a=Object(o.default)(s,n.a)},YfiR:function(t,e,i){"use strict";function s(){this.follow=function(t,e){this.post({url:"/i/moments/follow",data:e,success:"dataMomentFollowSuccess",error:"dataMomentFollowError"})},this.unfollow=function(t,e){this.post({url:"/i/moments/unfollow",data:e,success:"dataMomentUnfollowSuccess",error:"dataMomentUnfollowError"})},this.after("initialize",function(){this.on("uiFollowMoment",this.follow),this.on("uiUnfollowMoment",this.unfollow)})}var o=i("DBjh"),n=i("VtWx"),a=i("9np9");e.a=Object(o.default)(s,n.a,a.a)},Yumz:function(t,e,i){"use strict";function s(t){Object(o.a)(t),Object(n.a)(t),a.a.attachTo(document),r.a.attachTo("#moment-analytics-dialog"),l.a.attachTo(document),h.a.attachTo(document),c.a.attachTo(document),d.a.attachTo(".MomentsPage",{firstItemSelector:".MomentCapsuleItem:first"}),u.a.attachTo(".MomentDropdownMenu"),m.a.attachTo(".MomentDropdownMenu"),p.a.attachTo(document),g.a.attachTo(document),f.a.attachTo("#moment-share-dialog"),v.a.attachTo(document,t),M.a.attachTo(document,{tweetSelector:".tweet, .MomentCapsuleItemTweet"}),b.a.attachTo(".MomentsPage",y({},t,{tweetItemSelector:".MomentCapsuleItemTweet",genericInteractionItemSelector:".MomentCapsuleItemTweet",itemType:"tweet"})),w.a.attachTo(document,t),C.a.mixin(S.a).attachTo(".MomentsPage",y({},t,{tweetItemSelector:".MomentCapsuleItemTweet",genericInteractionItemSelector:".MomentCapsuleItemTweet",animationTweetSelector:".MomentCapsuleItemTweet",itemType:"tweet",loggedIn:t.loggedIn}))}e.a=s;var o=i("SFzM"),n=i("kX/m"),a=i("Kyl9"),r=i("Dfow"),l=i("Dp5M"),h=i("Ohd0"),c=i("mOS5"),d=i("ZssU"),u=i("YH6O"),m=i("fBID"),p=i("AUHA"),g=i("V2DB"),f=i("Qw78"),v=i("HEdP"),M=i("DR2D"),b=i("jctv"),w=i("MZZR"),C=i("Ny+n"),S=i("Pp1+"),y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}},ZssU:function(t,e,i){"use strict";function s(){this.defaultAttrs({genericItemSelector:".MomentCapsuleItem"})}var o=i("DBjh"),n=i("JdPb");e.a=Object(o.default)(s,n.a)},aOTK:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({top:"20%",triggerSelector:".js-updateMomentVisibility",confirmSelector:".js-confirm",cancelSelector:".cancel-action",titleSelector:".MomentMakerVisibilityDialog-title",descriptionSelector:".MomentMakerVisibilityDialog-description",shareUrlSelector:".MomentMakerVisibilityDialog-shareUrl",topBarSelector:".MomentMakerTopBar",dropdownButtonsSelector:".MomentMakerTopBarDropdownMenu .js-updateMomentVisibility",momentTitleSelector:".MomentCapsuleEditableMeta-title .rich-editor"}),this.before("openWhenTriggerClicked",function(e,i){this.setupDialog({newVisibility:t(e.target).attr(h.VisibilityMode)})}),this.onTriggerVisibilityUpdate=function(t,e){this.setupDialog({newVisibility:e.visibility_mode}),this.open()},this.onConfirm=function(t,e){this.trigger("uiMomentMakerUpdateVisibility",{moment_id:this.attr.momentId,visibility_mode:this.state.newVisibility}),this.close()},this.onUpdateVisibilitySuccess=function(e,i){this.$topBar.attr(h.VisibilityMode,i.visibility_mode),t(this.attr.dropdownButtonsSelector).each(function(e,s){var o=t(s),n=o.attr(h.VisibilityMode)===i.visibility_mode;o.prop("disabled",n)}),"public"===i.visibility_mode?this.trigger("uiMomentsOpenShareViaTweetDialog",{url:i.moment_permalink_url,title:t(this.attr.momentTitleSelector).text().trim()}):this.trigger("uiShowMessage",{message:Object(a.default)("Moment updated successfully.")})},this.setupDialog=function(t){this.state.newVisibility=t.newVisibility,this.state.currentVisibility=this.$topBar.attr(h.VisibilityMode);var e=void 0;this.state.newVisibility===r.Private?e=l.AnyToPrivate:this.state.newVisibility===r.Unlisted?e=l.AnyToUnlisted:this.state.currentVisibility===r.Private&&this.state.newVisibility===r.Public?e=l.PrivateToPublic:this.state.currentVisibility===r.Unlisted&&this.state.newVisibility===r.Public&&(e=l.UnlistedToPublic),this.select("titleSelector").text(e.title),this.select("descriptionSelector").text(e.description).toggleClass(l.UnlistedToPublic.class,e===l.UnlistedToPublic),this.select("confirmSelector").text(e.confirm),this.select("shareUrlSelector").toggle(e===l.AnyToUnlisted)},this.after("initialize",function(){this.state={newVisibility:void 0,currentVisibility:void 0},this.$topBar=t(this.attr.topBarSelector),this.on("click",{confirmSelector:this.onConfirm,cancelSelector:this.close}),this.on(document,"uiMomentMakerUpdateVisibilitySuccess",this.onUpdateVisibilitySuccess),this.on(document,"uiMomentMakerTriggerVisibilityUpdate",this.onTriggerVisibilityUpdate)})}var o=i("DBjh"),n=i("UHc7"),a=i("0d4m");e.a=Object(o.default)(n.a,s);var r={Private:"private",Unlisted:"unlisted",Public:"public"},l={AnyToPrivate:{title:Object(a.default)("Unpublish Moment"),description:Object(a.default)("If you unpublish a Moment, it won't be visible to the public anymore. You can publish it again any time."),confirm:Object(a.default)("Unpublish")},AnyToUnlisted:{title:Object(a.default)("Make Moment link only"),description:Object(a.default)("This Moment will only be visible to people with the link. It won't be listed on your profile or be published anywhere else on Twitter."),confirm:Object(a.default)("Confirm")},PrivateToPublic:{title:Object(a.default)("Publish Moment"),description:Object(a.default)("Publish? This Moment will be publicly available and listed on your profile. You can always unpublish or update a Moment later."),confirm:Object(a.default)("Publish")},UnlistedToPublic:{title:Object(a.default)("Your Moment isn't public"),description:Object(a.default)("This Moment is currently only visible to people with the link. Making it public will list it on your profile and make it recommendable by Twitter."),confirm:Object(a.default)("Publish anyway"),class:"for-unlistedToPublic"}},h={VisibilityMode:"data-visibility-mode"}}).call(e,i("4kSj"))},bnyz:function(t,e,i){/*! jQuery UI - v1.11.4 - 2016-06-20
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, draggable.js, resizable.js, slider.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(e){var s=i("4kSj");!function(t){function e(e,s){var o,n,a,r=e.nodeName.toLowerCase();return"area"===r?(o=e.parentNode,n=o.name,!(!e.href||!n||"map"!==o.nodeName.toLowerCase())&&(!!(a=t("img[usemap='#"+n+"']")[0])&&i(a))):(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r?e.href||s:s)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),s="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var e=t(this);return(!s||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&n.length?n:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var s=t.attr(i,"tabindex"),o=isNaN(s);return(o||s>=0)&&e(i,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function s(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(n,s(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(n,s(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,s,o=t(this[0]);o.length&&o[0]!==document;){if(("absolute"===(i=o.css("position"))||"relative"===i||"fixed"===i)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,s){var o,n=t.ui[e].prototype;for(o in s)n.plugins[o]=n.plugins[o]||[],n.plugins[o].push([i,s[o]])},call:function(t,e,i,s){var o,n=t.plugins[e];if(n&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<n.length;o++)t.options[n[o][0]]&&n[o][1].apply(t.element,i)}};/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var s=0,o=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,o,n;for(n=0;null!=(o=i[n]);n++)try{s=t._data(o,"events"),s&&s.remove&&t(o).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var o,n,a,r,l={},h=e.split(".")[0];return e=e.split(".")[1],o=h+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[h]=t[h]||{},n=t[h][e],a=t[h][e]=function(t,e){if(!this._createWidget)return new a(t,e);arguments.length&&this._createWidget(t,e)},t.extend(a,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(s,function(e,s){if(!t.isFunction(s))return void(l[e]=s);l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,n=this._superApply;return this._super=t,this._superApply=o,e=s.apply(this,arguments),this._super=i,this._superApply=n,e}}()}),a.prototype=t.widget.extend(r,{widgetEventPrefix:n?r.widgetEventPrefix||e:e},l,{constructor:a,namespace:h,widgetName:e,widgetFullName:o}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,a,i._proto)}),delete n._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,s,n=o.call(arguments,1),a=0,r=n.length;a<r;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var a="string"==typeof n,r=o.call(arguments,1),l=this;return a?this.each(function(){var i,o=t.data(this,s);return"instance"===n?(l=o,!1):o?t.isFunction(o[n])&&"_"!==n.charAt(0)?(i=o[n].apply(o,r),i!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+n+"'")}):(r.length&&(n=t.widget.extend.apply(null,[n].concat(r))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,o,n,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(o=a[e]=t.widget.extend({},this.options[e]),n=0;n<s.length-1;n++)o[s[n]]=o[s[n]]||{},o=o[s[n]];if(e=s.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,s){var o,n=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=o=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,o=this.widget()),t.each(s,function(s,a){function r(){if(e||!0!==n.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?n[a]:a).apply(n,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+n.eventNamespace,c=l[2];c?o.delegate(c,h,r):i.bind(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var o,n,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(o in n)o in i||(i[o]=n[o]);return this.element.trigger(i,s),!(t.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,o,n){"string"==typeof o&&(o={effect:o});var a,r=o?!0===o||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),a=!t.isEmptyObject(o),o.complete=n,o.delay&&s.delay(o.delay),a&&t.effects&&t.effects.effect[r]?s[e](o):r!==e&&s[r]?s[r](o.duration,o.easing,n):s.queue(function(i){t(this)[e](),n&&n.call(s[0]),i()})}});var n=(t.widget,!1);t(document).mouseup(function(){n=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),n=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(t){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",e,s))return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),o=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,o=this.options,n=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=t(o.containment),void((s=i[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,o,n,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(o=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-a.grid[1]:o+a.grid[1]:o,n=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-a.grid[0]:n+a.grid[0]:n),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var o=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,s){var o=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,i,s){t.each(s.sortables,function(){var o=!1,n=this;n.positionAbs=s.positionAbs,n.helperProportions=s.helperProportions,n.offset.click=s.offset.click,n._intersectsWith(n.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])&&(o=!1),o})),o?(n.isOver||(n.isOver=1,s._parent=i.helper.parent(),n.currentItem=i.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return i.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=s.offset.click.top,n.offset.click.left=s.offset.click.left,n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top,s._trigger("toSortable",e),s.dropped=n.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,n.fromOutside=s),n.currentItem&&(n._mouseDrag(e),i.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var o=t("body"),n=s.options;o.css("cursor")&&(n._cursor=o.css("cursor")),o.css("cursor",n.cursor)},stop:function(e,i,s){var o=s.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var o=t(i.helper),n=s.options;o.css("opacity")&&(n._opacity=o.css("opacity")),o.css("opacity",n.opacity)},stop:function(e,i,s){var o=s.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var o=s.options,n=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(o.axis&&"x"===o.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<o.scrollSensitivity?a.scrollTop=n=a.scrollTop+o.scrollSpeed:e.pageY-s.overflowOffset.top<o.scrollSensitivity&&(a.scrollTop=n=a.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<o.scrollSensitivity?a.scrollLeft=n=a.scrollLeft+o.scrollSpeed:e.pageX-s.overflowOffset.left<o.scrollSensitivity&&(a.scrollLeft=n=a.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(r).scrollTop()<o.scrollSensitivity?n=t(r).scrollTop(t(r).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<o.scrollSensitivity&&(n=t(r).scrollTop(t(r).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(r).scrollLeft()<o.scrollSensitivity?n=t(r).scrollLeft(t(r).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<o.scrollSensitivity&&(n=t(r).scrollLeft(t(r).scrollLeft()+o.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var o=s.options;s.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var o,n,a,r,l,h,c,d,u,m,p=s.options,g=p.snapTolerance,f=i.offset.left,v=f+s.helperProportions.width,M=i.offset.top,b=M+s.helperProportions.height;for(u=s.snapElements.length-1;u>=0;u--)l=s.snapElements[u].left-s.margins.left,h=l+s.snapElements[u].width,c=s.snapElements[u].top-s.margins.top,d=c+s.snapElements[u].height,v<l-g||f>h+g||b<c-g||M>d+g||!t.contains(s.snapElements[u].item.ownerDocument,s.snapElements[u].item)?(s.snapElements[u].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[u].item})),s.snapElements[u].snapping=!1):("inner"!==p.snapMode&&(o=Math.abs(c-b)<=g,n=Math.abs(d-M)<=g,a=Math.abs(l-v)<=g,r=Math.abs(h-f)<=g,o&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),m=o||n||a||r,"outer"!==p.snapMode&&(o=Math.abs(c-M)<=g,n=Math.abs(d-b)<=g,a=Math.abs(l-f)<=g,r=Math.abs(h-v)<=g,o&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[u].snapping&&(o||n||a||r||m)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[u].item})),s.snapElements[u].snapping=o||n||a||r||m)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var o,n=s.options,a=t.makeArray(t(n.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(o=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var o=t(i.helper),n=s.options;o.css("zIndex")&&(n._zIndex=o.css("zIndex")),o.css("zIndex",n.zIndex)},stop:function(e,i,s){var o=s.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}});t.ui.draggable;/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
t.widget("ui.resizable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return e[s]>0||(e[s]=1,o=e[s]>0,e[s]=0,o)},_create:function(){var e,i,s,o,n,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),n="ui-resizable-"+s,o=t("<div class='ui-resizable-handle "+n+"'></div>"),o.css({zIndex:r.zIndex}),this.handles[s]=".ui-resizable-"+s,this.element.append(o);this._renderAxis=function(e){var i,s,o,n;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,o=!1;for(i in this.handles)((s=t(this.handles[i])[0])===e.target||t.contains(s,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,s,o,n=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(i+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,o=this.originalMousePosition,n=this.axis,a=e.pageX-o.left||0,r=e.pageY-o.top||0,l=this._change[n];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,o,n,a,r,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,n=s?0:c.sizeDiff.width,a={width:c.helper.width()-n,height:c.helper.height()-o},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,o,n,a=this.options;n={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,i=n.maxHeight*this.aspectRatio,o=n.maxWidth/this.aspectRatio,e>n.minWidth&&(n.minWidth=e),s>n.minHeight&&(n.minHeight=s),i<n.maxWidth&&(n.maxWidth=i),o<n.maxHeight&&(n.maxHeight=o)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,n=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return n&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),n&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),a&&c&&(t.top=l-e.minHeight),o&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseInt(s[e],10)||0,i[e]+=parseInt(o[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,o=i._proportionallyResizeElements,n=o.length&&/textarea/i.test(o[0].nodeName),a=n&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,r=n?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,o,n,a,r,l=t(this).resizable("instance"),h=l.options,c=l.element,d=h.containment,u=d instanceof t?d.get(0):/parent/.test(d)?c.parent().get(0):d;u&&(l.containerElement=t(u),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(u),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,o=l.containerSize.height,n=l.containerSize.width,a=l._hasScroll(u,"left")?u.scrollWidth:n,r=l._hasScroll(u)?u.scrollHeight:o,l.parentData={element:u,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,o,n,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,c=a._aspectRatio||e.shiftKey,d={top:0,left:0},u=a.containerElement,m=!0;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),c&&(a.size.height=a.size.width/a.aspectRatio,m=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,m=!1),a.position.top=a._helper?l.top:0),o=a.containerElement.get(0)===a.element.parent().get(0),n=/relative|absolute/.test(a.containerElement.css("position")),o&&n?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top)),i+a.size.width>a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,m=!1)),s+a.size.height>a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,m=!1)),m||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,o=e.containerPosition,n=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:r.left-o.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:r.left-o.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,i){var s=t(this).resizable("instance"),o=s.options,n=s.originalSize,a=s.originalPosition,r={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(o.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},n=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,o=i.size,n=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,d=Math.round((o.width-n.width)/h)*h,u=Math.round((o.height-n.height)/c)*c,m=n.width+d,p=n.height+u,g=s.maxWidth&&s.maxWidth<m,f=s.maxHeight&&s.maxHeight<p,v=s.minWidth&&s.minWidth>m,M=s.minHeight&&s.minHeight>p;s.grid=l,v&&(m+=h),M&&(p+=c),g&&(m-=h),f&&(p-=c),/^(se|s|e)$/.test(r)?(i.size.width=m,i.size.height=p):/^(ne)$/.test(r)?(i.size.width=m,i.size.height=p,i.position.top=a.top-u):/^(sw)$/.test(r)?(i.size.width=m,i.size.height=p,i.position.left=a.left-d):((p-c<=0||m-h<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),p-c>0?(i.size.height=p,i.position.top=a.top-u):(p=c-e.height,i.size.height=p,i.position.top=a.top+n.height-p),m-h>0?(i.size.width=m,i.position.left=a.left-d):(m=h-e.width,i.size.width=m,i.position.left=a.left+n.width-m))}});t.ui.resizable,t.widget("ui.slider",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n=[];for(i=s.values&&s.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),e=o.length;e<i;e++)n.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=o.add(t(n.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,o,n,a,r,l,h=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-h.values(e));(o>i||o===i&&(e===h._lastChangedValue||h.values(e)===c.min))&&(o=i,n=t(this),a=e)}),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,n.addClass("ui-state-active").focus(),r=n.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-r.left-n.width()/2,top:e.pageY-r.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,o,n;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),o=this._valueMax()-this._valueMin(),n=this._valueMin()+s*o,this._trimAlignValue(n)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,o,n;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i>s||1===e&&i<s)&&(i=s),i!==this.values(e)&&(o=this.values(),o[e]=i,n=this._trigger("slide",t,{handle:this.handles[e],value:i,values:o}),s=this.values(e?0:1),!1!==n&&this.values(e,i))):i!==this.value()&&!1!==(n=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,o,n;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,o=arguments[0],n=0;n<s.length;n+=1)s[n]=this._trimAlignValue(o[n]),this._change(null,n);this._refreshValue()},_setOption:function(e,i){var s,o=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!i),this._super(e,i),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;s<o;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;t=Math.floor(+(t-e).toFixed(this._precision())/i)*i+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,i,s,o,n,a=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),o=this._valueMin(),n=this._valueMax(),i=n!==o?(s-o)/(n-o)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(e){var i,s,o,n=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),!1===this._start(e,n)))return}switch(o=this.options.step,i=s=this.options.values&&this.options.values.length?this.values(n):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(e,n,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(s),t.exports=s}()},dCCo:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="MomentMakerMaskedImage has-mask">\n  <img class="MomentMakerMaskedImage-image" src="'),s.b(s.v(s.f("url",t,e,0))),s.b('" width="640" height="auto" />\n  <div class="MomentMakerMaskedImage-imageClip" style="background: url('),s.b(s.v(s.f("url",t,e,0))),s.b(') no-repeat; background-size: cover;"></div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},fBID:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({blockOrUnblockSelector:".js-blockMomentAuthor, .js-unblockMomentAuthor",blockSelector:".js-blockMomentAuthor",unblockSelector:".js-unblockMomentAuthor",reportSelector:".js-reportMoment",hiddenClass:"u-hidden"}),this.onBlockOrUnblock=function(e,i){var s=t(i.target).closest(this.attr.blockOrUnblockSelector),o={target:"user",userId:s.attr("data-user-id"),screenName:s.attr("data-screen-name")};switch(e){case n.BLOCK:this.trigger("uiNeedsBlockDialog",o),this.blockUserId=o.userId;break;case n.UNBLOCK:this.trigger("uiUnblockAction",o),this.toggleBlockButtons(n.UNBLOCK),this.trigger("uiCloseDropdowns")}},this.onAuthorBlocked=function(t,e){this.blockUserId===e.userId&&(this.toggleBlockButtons(n.BLOCK),this.blockUserId=null)},this.toggleBlockButtons=function(t){this.select("blockSelector").toggleClass(this.attr.hiddenClass,t===n.BLOCK),this.select("unblockSelector").toggleClass(this.attr.hiddenClass,t===n.UNBLOCK)},this.onReport=function(e,i){var s=t(e.target).attr("data-moment-id"),o=t(e.target).attr("data-cover-tweet-id"),n=t(e.target).attr("data-reported-user-id");this.trigger("uiNeedsReportDialog",{target:"moment",momentId:s,tweetId:o,userId:n})},this.after("initialize",function(){this.on("click",{blockSelector:this.onBlockOrUnblock.bind(this,n.BLOCK),unblockSelector:this.onBlockOrUnblock.bind(this,n.UNBLOCK),reportSelector:this.onReport}),this.on(document,"uiDidTriggerBlockingAction",this.onAuthorBlocked)})}var o=i("DBjh");e.a=Object(o.default)(s);var n={BLOCK:"block",UNBLOCK:"unblock"}}).call(e,i("4kSj"))},fW86:function(t,e,i){"use strict";function s(){this.getTweets=function(t,e){function i(){this.trigger("dataMomentMakerGetRecommendedTweetsFailure",e)}this.get({url:"/i/moments/edit/"+this.attr.momentId+"/recommendations/"+e.category,data:e,success:"dataMomentMakerGetRecommendedTweetsSuccess",error:i.bind(this)})},this.after("initialize",function(){this.on("uiMomentMakerGetRecommendedTweets",this.getTweets)})}var o=i("DBjh"),n=i("VtWx");e.a=Object(o.default)(s,n.a)},fnUg:function(t,e,i){"use strict";function s(){this.defaultAttrs({left:0,top:"20%",openOnPageChanged:!0,disabledButtonSelector:".js-close[disabled]"}),this.after("open",function(){this.select("disabledButtonSelector").prop("disabled",!1)})}var o=i("DBjh"),n=i("UHc7");e.a=Object(o.default)(n.a,s)},g2cS:function(t,e,i){"use strict";function s(){this.defaultAttrs({tooltipName:void 0}),this.showTooltip=function(){this.$node.tooltip("show"),this.setCookie()},this.hideTooltip=function(){this.$node.tooltip("hide")},this.hasCookie=function(){return!!Object(n.a)(this.cookieKey)},this.setCookie=function(){Object(n.a)(this.cookieKey,!0,{expires:1/0})},this.after("initialize",function(){this.cookieKey="moments_"+this.attr.tooltipName,this.attr.tooltipName&&!this.hasCookie()&&(this.showTooltip(),this.on(document,"click",this.hideTooltip))})}var o=i("DBjh"),n=i("dsp6");e.a=Object(o.default)(s)},h0Yn:function(t,e,i){"use strict";function s(){this.attributes({capsuleSelector:".MomentsPermalinkPage-capsule",blockInterstitialSelector:".MomentInterstitialMessage",buttonSelector:".MomentInterstitialMessage-viewMomentButton",hiddenClass:"is-hidden"}),this.showCapsule=function(){this.select("blockInterstitialSelector").addClass(this.attr.hiddenClass),this.select("capsuleSelector").removeClass(this.attr.hiddenClass)},this.after("initialize",function(){this.on("click",{buttonSelector:this.showCapsule})})}var o=i("DBjh");e.a=Object(o.default)(s)},hUei:function(t,e,i){"use strict";function s(){this.defaultAttrs({top:"20%",deleteSelector:".js-confirmDeleteTweet"}),this.onDeleteClick=function(){this.trigger("uiMomentMakerConfirmDelete"),this.close()},this.after("initialize",function(){this.on("click",{deleteSelector:this.onDeleteClick}),this.on(document,"uiMomentMakerOpenDeleteTweetDialog",this.open)})}var o=i("DBjh"),n=i("UHc7"),a=Object(o.default)(s,n.a);e.a=a},i97h:function(t,e,i){"use strict";function s(){this.scribeControlInteraction=function(t){return function(e,i){this.scribeInteraction({component:"capsule_item",action:t},i)}},this.after("initialize",function(){this.on("uiMomentMediaPlay",this.scribeControlInteraction("play")),this.on("uiMomentMediaPause",this.scribeControlInteraction("pause")),this.on("uiMomentMediaMute",this.scribeControlInteraction("mute")),this.on("uiMomentMediaUnmute",this.scribeControlInteraction("unmute"))})}var o=i("DBjh"),n=i("gcfh");e.a=Object(o.default)(s,n.a)},iaqp:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var o=i("Opvs").default,n={"dialogs/close_button":i("38hD"),"moments/maker/moment_maker_cover_preview":i("D61c")},a=o(n),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal MomentMakerCropBeforePublishDialog">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="MomentMakerCropBeforePublishDialog-title">Crop for mobile</h3>\n      <div class="MomentMakerCropBeforePublishDialog-actions">\n        <button class="EdgeButton EdgeButton--small EdgeButton--tertiary MomentMakerCropBeforePublishDialog-forcePublish">Publish anyway</button>\n        <button class="EdgeButton EdgeButton--small EdgeButton--primary js-cropAll MomentMakerCropBeforePublishDialog-cropAll">\n          <span class="Icon Icon--crop Icon--smallest"></span>\n          Crop images\n        </button>\n      </div>\n    </div>\n    <div class="modal-body">\n      <div class="MomentMakerCropBeforePublishDialog-imageGrid">\n        <div class="MomentMakerCropBeforePublishDialog-cropPrompt">To make this Moment look its best on mobile, crop these images.</div>\n        <div class="MomentMakerCropBeforePublishDialog-imageGridImages">\n'),s.b(s.rp("<moments/maker/moment_maker_cover_preview1",t,e,"          ")),s.b("        </div>\n"),s.s(s.f("show_more_placeholder",t,e,1),t,e,0,1099,1406,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('          <div class="MomentMakerCropBeforePublishDialog-cellPlaceholder MomentMakerCoverDialog-cell">\n            \n              '),s.s(s.f("more_count_one",t,e,1),t,e,0,1249,1270,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("+ "),i.b(i.v(i.f("more_count",t,e,0))),i.b(" more")}),t.pop()),s.b("\n"+i),s.b("              "),s.s(s.f("more_count_other",t,e,1),t,e,0,1325,1346,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("+ "),i.b(i.v(i.f("more_count",t,e,0))),i.b(" more")}),t.pop()),s.b("\n"+i),s.b("            \n          </div>\n")}),t.pop()),s.b("      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}},"<moments/maker/moment_maker_cover_preview1":{name:"moments/maker/moment_maker_cover_preview",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},mOS5:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiPageBottomReached",{component:"moment_capsule",action:"scroll_to_bottom"}),this.scribeOnEvent("uiMomentFormatLinkClick",{component:"moment_capsule",element:"link_cta",action:"open_link"}),this.scribeOnEvent("uiMomentDropdownMenuOpen",{component:"moment_capsule_menu",action:"open"})})}var o=i("DBjh"),n=i("3oDc");e.a=Object(o.default)(s,n.a)},mVIY:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({isRequired:!1,setFocusOnLoad:!1,emptyStateClass:"is-empty",textEditorSelector:".rich-editor",saveInterval:2e3}),this.shouldSaveText=function(t){return t!==this.currentMeta&&t.length<=this.attr.maxLength&&!(this.attr.isRequired&&!t)},this.triggerSaveMeta=function(e){var i=void 0;i="focusout"===e.type?t(e.target):t(e.target).find(this.attr.textEditorSelector);var s=i.data("field"),o=this.addHiddenText(this.getVisibleText());if(this.shouldSaveText(o)){var n={moment_id:this.attr.momentId,field:s,value:o};this.$node.toggleClass(this.attr.emptyStateClass,!o.length),this.currentMeta=o,this.trigger("uiMomentMakerEditMeta",n)}},this.onFailure=function(){this.trigger("uiShowError",{message:Object(o.default)("Something went wrong. Give it a minute, then try again.")})},this.onSuccess=function(){},this.after("initialize",function(){this.initTextNode(),this.attr.setFocusOnLoad&&this.focus(),this.currentMeta=this.addHiddenText(this.getVisibleText()),this.on("click",this.focus),this.on("focusout",this.triggerSaveMeta),this.on("uiTextChanged",Object(d.a)(this.triggerSaveMeta,this.attr.saveInterval,this.attr.saveInterval,!1)),this.on(document,"dataMomentMakerEditMetaSuccess",this.onSuccess),this.on(document,"dataMomentMakerEditMetaFailure",this.onFailure)})}var o=i("0d4m"),n=i("DBjh"),a=i("FBSA"),r=i("84/5"),l=i("LcyA"),h=i("pUl/"),c=i("+HBl"),d=i("ZYtG");e.a=Object(n.default)(s,h.a,r.a,a.a,l.a,c.a)}).call(e,i("4kSj"))},mgMq:function(t,e,i){"use strict";function s(){this.attributes({interval:1e4}),this.handleUpdateSportsScores=function(){this.get({url:"/i/moments/sports_scores/"+this.sportIds,success:"uiUpdateSportsScores"})},this.setUpSportsScoresClock=function(t,e){this.sportIds=e.sportIds,n.default.setIntervalEvent("dataMomentGetUpdatedSportsScores",this.attr.interval)},this.after("initialize",function(){this.on(document,"dataMomentSetupSportsScores",this.setUpSportsScoresClock),this.on(document,"dataMomentGetUpdatedSportsScores",this.handleUpdateSportsScores)})}var o=i("DBjh"),n=i("r8Bt"),a=i("VtWx");e.a=Object(o.default)(s,a.a)},mgxC:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({mediaItemSelector:".MomentMediaItem",attributionContainerSelector:".MomentMakerCapsuleCover-attribution",changeCoverSelector:".MomentMakerCapsuleCover-setButton, .MomentMakerCapsuleCover-changeButton",coverMediaSelector:".MomentMakerCapsuleCover-media",coverContainerSelector:".MomentMakerCapsuleCover-mediaMask",emptyCoverContainerSelector:".MomentMakerCapsuleCover-empty",spinnerSelector:".MomentMakerCapsuleCover-spinner",hasMediaClass:"has-media"}),this.displayNewCover=function(e,i){var s=t(i.media),o=this.select("mediaItemSelector");this.$node.addClass(this.attr.hasMediaClass),o.replaceWith(s.clone()),this.select("attributionContainerSelector").html(i.attribution),this.trigger("uiMomentsHasInjectedNewItems")},this.handleSetCoverSuccess=function(t,e){this.displayNewCover(t,e),this.trigger("uiMomentMakerHasNewCoverImage"),this.setCoverComplete()},this.handleCoverFailure=function(){this.trigger("uiShowMessage",{message:Object(o.default)("Unable to set cover image")}),this.setCoverComplete()},this.showSpinner=function(){this.$spinner.show(),this.$coverContainer.hide()},this.setCoverComplete=function(){var t=this.hasCover();this.$spinner.hide(),this.$coverContainer.toggle(t),this.$emptyCoverContainer.toggle(!t)},this.hasCover=function(){return!!this.$coverContainer.closest(this.attr.coverMediaSelector).hasClass(this.attr.hasMediaClass)},this.after("initialize",function(){this.$spinner=this.select("spinnerSelector"),this.$coverContainer=this.select("coverContainerSelector"),this.$emptyCoverContainer=this.select("emptyCoverContainerSelector"),this.on("click",{changeCoverSelector:"uiMomentMakerChangeCoverButtonClicked"}),this.on(document,"uiMomentMakerSetCover uiMomentMakerSetCoverByMediaId",this.showSpinner),this.on(document,"dataMomentMakerSetCoverCropSuccess",this.displayNewCover),this.on(document,"dataMomentMakerSetCoverSuccess",this.handleSetCoverSuccess),this.on(document,"dataMomentMakerSetCoverFailure",this.handleCoverFailure)})}var o=i("0d4m"),n=i("DBjh"),a=Object(n.default)(s);e.a=a}).call(e,i("4kSj"))},"mjs/":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({maskElementSelector:"body",contentMaskClass:"has-sensitive-content-mask"}),this.removeMask=function(){t(this.attr.maskElementSelector).removeClass(this.attr.contentMaskClass)},this.after("initialize",function(){this.on(document,"uiMomentShowSensitiveContentDialog",this.open),this.on("uiDialogCloseRequested",this.removeMask)})}var o=i("DBjh"),n=i("UHc7");e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},nvPm:function(t,e,i){"use strict";(function(t){function s(){this.attributes({mediaSelector:'.MomentMediaItem[data-playable="true"]',mediaEntitySelector:".MomentMediaItem-entity--audio, .MomentMediaItem-entity--video",mediaControlSelector:".MomentMediaControls",badgeLabelSelector:".MomentMediaBadge-iconLabel",errorLabelSelector:".MomentMediaItem-errorOverlay",autoplayingVideoSelector:'[data-autoplaying-media="true"]',playingSelector:".is-playing",playingClass:"is-playing",mutedClass:"is-muted",hasErrorClass:"has-error",hasInteractedClass:"has-interacted",loadedClass:"is-loaded",itemType:"tweet"}),this.playMedia=function(t){this.hasError(t)||this.isPlaying(t)||(t.$entity.trigger("uiMomentMediaPlay",n.default.merge(t.scribeData,{sourceType:t.sourceType,tweetId:t.tweetId,hasInteracted:this.hasInteracted(t)})),t.$media.addClass(this.attr.playingClass))},this.pauseMedia=function(t){!this.hasError(t)&&this.isPlaying(t)&&(t.$entity.trigger("uiMomentMediaPause",n.default.merge(t.scribeData,{sourceType:t.sourceType,tweetId:t.tweetId,hasInteracted:this.hasInteracted(t)})),t.$media.removeClass(this.attr.playingClass))},this.muteMedia=function(t){this.hasError(t)||this.isMuted(t)||(t.$entity.trigger("uiMomentMediaMute",t.scribeData),t.$media.addClass(this.attr.mutedClass),this.markInteraction(t))},this.unmuteMedia=function(t){!this.hasError(t)&&this.isMuted(t)&&(t.$entity.trigger("uiMomentMediaUnmute",t.scribeData),t.$media.removeClass(this.attr.mutedClass),this.markInteraction(t))},this.pausePlayingMedia=function(){var e=this;this.select("mediaSelector").filter(this.attr.playingSelector).each(function(_,i){return e.pauseMedia(e.getMedia(t(i)))})},this.resumePlayingMedia=function(){var t=this.select("mediaSelector").filter(this.attr.autoplayingVideoSelector);t.length&&this.playMedia(this.getMedia(t))},this.onMediaMouseover=function(t){var e=this.getMediaForEvent(t);"audio"===e.sourceType&&this.playMedia(e),"gif"!==e.sourceType&&this.unmuteMedia(e)},this.onMediaMouseout=function(t){var e=this.getMediaForEvent(t);"audio"===e.sourceType&&this.pauseMedia(e),"gif"!==e.sourceType&&this.muteMedia(e)},this.onMediaClick=function(t){var e=this.getMediaForEvent(t);this.markInteraction(e),this.isPlaying(e)?this.pauseMedia(e):this.playMedia(e)},this.onPlaybackComplete=function(t,e){var i=this.getMediaForEvent(t);"gif"!==i.sourceType&&"vine"!==i.sourceType&&(i.$media.removeClass(this.attr.playingClass),this.playMedia(i))},this.onMediaLoaded=function(t,e){var i=this.getMediaForEvent(t);"audio"===i.sourceType&&this.onAudioLoaded(i,e)},this.onAudioLoaded=function(t,e){var i=t.$media.find(this.attr.badgeLabelSelector);e.artist&&e.title&&""===i.text()&&i.text(e.artist+" - "+e.title).addClass(this.attr.loadedClass)},this.onMediaUnloaded=function(t){this.resetMedia(this.getMediaForEvent(t))},this.onMediaLoadError=function(t){var e=this.getMediaForEvent(t),i=e.$media.find(this.attr.errorLabelSelector);"uiMomentMediaLoadErrorRestrict"===t.type?i.text(Object(a.default)("The owner has restricted access to this content.")):i.text(Object(a.default)("This media cannot be played.")),this.markError(e)},this.syncVideoAutoplayStart=function(t){var e=this.getMediaForEvent(t);this.isAutoplayingVideo(e)&&(this.hasInteracted(e)?this.playMedia(e):e.$media.addClass(this.attr.playingClass))},this.syncVideoAutoplayStop=function(t){var e=this.getMediaForEvent(t);this.isAutoplayingVideo(e)||(this.hasInteracted(e)?this.pauseMedia(e):e.$media.removeClass(this.attr.playingClass))},this.onTeardown=function(){var e=this;this.select("mediaSelector").filter(this.attr.playingSelector).each(function(_,i){return e.resetMedia(e.getMedia(t(i)))})},this.getMediaForEvent=function(e){var i=t(e.target).closest(this.attr.mediaSelector);return this.getMedia(i)},this.getMedia=function(t){var e=t.find(this.attr.mediaEntitySelector);return{$media:t,$entity:e,sourceType:t.attr("data-source-type"),tweetId:e.attr("data-tweet-id"),scribeData:this.interactionData(e)}},this.isMuted=function(t){return t.$media.hasClass(this.attr.mutedClass)},this.isPlaying=function(t){return t.$media.hasClass(this.attr.playingClass)},this.isAutoplayingVideo=function(t){return t.$media.is(this.attr.autoplayingVideoSelector)},this.markError=function(t){t.$media.addClass(this.attr.hasErrorClass)},this.hasError=function(t){return t.$media.hasClass(this.attr.hasErrorClass)},this.markInteraction=function(t){t.$media.addClass(this.attr.hasInteractedClass)},this.hasInteracted=function(t){return t.$media.hasClass(this.attr.hasInteractedClass)},this.resetMedia=function(t){t.$media.addClass(this.attr.mutedClass),t.$media.removeClass(this.attr.playingClass),t.$media.removeClass(this.attr.hasInteractedClass),t.$media.removeClass(this.attr.hasErrorClass)},this.after("initialize",function(){this.on("mouseover",{mediaControlSelector:this.onMediaMouseover}),this.on("mouseout",{mediaControlSelector:this.onMediaMouseout}),this.on("click",{mediaControlSelector:this.onMediaClick}),this.on(document,"uiMomentMediaPlayerLoaded",this.onMediaLoaded),this.on(document,"uiMomentMediaPlayerUnloaded",this.onMediaUnloaded),this.on(document,"uiMomentMediaPlaybackComplete",this.onPlaybackComplete),this.on(document,"uiMomentMediaLoadError uiMomentMediaLoadErrorRestrict",this.onMediaLoadError),this.on(document,"uiMomentVideoAutoplayStart",this.syncVideoAutoplayStart),this.on(document,"uiMomentVideoAutoplayStop",this.syncVideoAutoplayStop),this.on(document,"uiOverlayNavigate",this.pausePlayingMedia),this.on(document,"uiOverlayClosed",this.resumePlayingMedia)}),this.before("teardown",this.onTeardown)}var o=i("DBjh"),n=i("YzIt"),a=i("0d4m"),r=i("alSu");e.a=Object(o.default)(s,r.a)}).call(e,i("4kSj"))},p0Z0:function(t,e,i){"use strict";(function(t){function s(){this.attributes({audioContainerSelector:".MomentMediaItem-entity--audio",audioIframeSelector:".MomentMediaItem-entity--audio iframe",audioPlayerLoadedClass:"is-loaded"}),this.playAudio=function(t,e){var i=this.getIframeForEvent(t);this.postMessage(i,"play")},this.pauseAudio=function(t,e){this.postMessage(this.getIframeForEvent(t),"pause")},this.muteAudio=function(t,e){this.postMessage(this.getIframeForEvent(t),"mute")},this.unmuteAudio=function(t,e){this.postMessage(this.getIframeForEvent(t),"unmute")},this.loadIframe=function(e){var i=t(e.target).closest(this.attr.audioContainerSelector),s=t("<iframe>").attr("src",i.data("src")+"?muteOnStart=true").hide();i.html(s).addClass(this.attr.audioPlayerLoadedClass),s.fadeIn()},this.unloadIframe=function(e){var i=t(e.target).closest(this.attr.audioContainerSelector);i.empty(),i.removeClass(this.attr.audioPlayerLoadedClass),i.trigger("uiMomentMediaPlayerUnloaded")},this.postMessage=function(t,e){t&&t.contentWindow&&t.contentWindow.postMessage({method:e,context:"player.js"},"*")},this.onMessage=function(t){var e=t.originalEvent||t,i=e.data;if(i&&"https://twitter.com"===e.origin){if("string"==typeof i)try{i=JSON.parse(i)}catch(t){return}"player.js"===i.context&&this.isValidMessage(e)&&this.handleMessage(e,i)}},this.handleMessage=function(t,e){var i=this.getIframeBySource(t.source);switch(e.event){case"audioPlayerLoadSuccess":i.trigger("uiMomentMediaPlayerLoaded",e.value);break;case"audioPlayerLoadFailure":this.handleFailureMessage(i,e.value);break;case"audioPlayerPlaybackComplete":i.trigger("uiMomentMediaPlaybackComplete")}},this.handleFailureMessage=function(t,e){switch(e.status){case 403:t.trigger("uiMomentMediaLoadErrorRestrict");break;default:t.trigger("uiMomentMediaLoadError")}},this.isValidMessage=function(t){return this.getIframeBySource(t.source).length>0},this.getIframeBySource=function(t){return this.select("audioIframeSelector").filter(function(){return this.contentWindow===t})},this.getIframeForEvent=function(e){return t(e.target).find("iframe").get(0)},this.after("initialize",function(){this.on("uiMomentMediaPlay",this.playAudio),this.on("uiMomentMediaPause",this.pauseAudio),this.on("uiMomentMediaMute",this.muteAudio),this.on("uiMomentMediaUnmute",this.unmuteAudio),this.on("uiAudioPlayerLoadIframe",this.loadIframe),this.on("uiAudioPlayerUnloadIframe",this.unloadIframe),this.on(window,"message",this.onMessage)})}var o=i("DBjh"),n=i("3oDc");e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},q1hc:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var o=i("Opvs").default,n={"dialogs/close_button":i("38hD")},a=o(n),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(s.rp("<dialogs/close_button0",t,e,"")),s.b('<div class="modal-header">\n  <h3 class="modal-title">\n    Embed this Moment\n  </h3>\n</div>\n<div class="modal-body">\n'),s.s(s.f("is_loading",t,e,1),t,e,0,159,269,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="MomentShareDialog-loading">\n      <span class="u-hiddenVisually">Loading</span>\n    </div>\n')}),t.pop()),s.s(s.f("is_loading",t,e,1),t,e,1,0,0,"")||(s.b('    <p class="MomentShareDialog-description">\n      Add this Moment to your website by copying the code below. <a target="_blank" href="'),s.b(s.v(s.f("help_url",t,e,0))),s.b('" rel="noopener">Learn more</a>\n    </p>\n    <textarea class="MomentShareDialog-url MomentShareDialog-url--embed js-initial-focus u-dir" dir="ltr" readonly>'),s.b(s.v(s.f("url",t,e,0))),s.b("</textarea>\n")),s.b("</div>"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},qDMi:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var o=i("Opvs").default,n={"dialogs/close_button":i("38hD")},a=o(n),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b(s.rp("<dialogs/close_button0",t,e,"")),s.b('<div class="modal-header">\n  <h3 class="modal-title">\n    Copy link to Moment\n  </h3>\n</div>\n<div class="modal-body">\n  <p class="MomentShareDialog-description">\n    The URL of this Moment is below. Copy it to easily share with friends.\n  </p>\n  <textarea class="MomentShareDialog-url MomentShareDialog-url--link js-initial-focus u-dir" dir="ltr" readonly>'),s.b(s.v(s.f("url",t,e,0))),s.b("</textarea>\n</div>"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},qVeo:function(t,e,i){"use strict";function s(t){Object(n.a)(t),t.loggedIn||Object(a.default)(t),r.a.attachTo(document),l.a.attachTo(".MomentsPage",{loggedIn:t.loggedIn}),h.a.attachTo(document),c.a.attachTo(".MomentsPage",{loggedIn:t.loggedIn}),d.a.attachTo(document),u.a.attachTo(".MomentsPage"),m.a.attachTo(document),p.a.attachTo(".MomentsPage"),g.a.attachTo(".MomentsPage"),f.a.attachTo(".MomentsPage"),v.a.attachTo(document),M.a.attachTo(".MomentsPage"),b.a.attachTo(document),w.a.attachTo(document),y.attachTo(".MomentsPage",S({},t,{itemType:"tweet"}))}e.a=s;var o=i("DBjh"),n=i("hhhH"),a=i("DNqT"),r=i("YfiR"),l=i("y8Xy"),h=i("2RHn"),c=i("uOOm"),d=i("KfqD"),u=i("F2sH"),m=i("Q26E"),p=i("p0Z0"),g=i("szK3"),f=i("nvPm"),v=i("i97h"),M=i("8Xx6"),b=i("lTdQ"),w=i("hDvG"),C=i("xgWv"),S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},y=Object(o.default)(C.a)},"rp+5":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({buttonSelector:".MomentMakerActionButtons-button--up, .MomentMakerActionButtons-button--down",upClass:"MomentMakerActionButtons-button--up",capsuleItemSelector:".MomentCapsuleItem",capsuleItemMargin:80}),this.adjustViewport=function(t,e){var i=this.$body.scrollTop(),s=t.height()+this.attr.capsuleItemMargin;"above"===e?this.$body.animate({scrollTop:i-s},300):this.$body.animate({scrollTop:i+s},300)},this.handleMove=function(e,i){var s=t(e.target).closest(this.attr.buttonSelector),o=s.closest(this.attr.capsuleItemSelector),n=s.hasClass(this.attr.upClass),a=n?o.prev():o.next();a.filter(this.attr.capsuleItemSelector).length&&(this.trigger("uiMomentMakerReorderTweet",{moment_id:this.attr.momentId,tweet_id:o.attr("data-tweet-id"),relative_tweet_id:a.attr("data-tweet-id"),above:n}),n?(this.adjustViewport(a,"above"),o.insertBefore(a)):(this.adjustViewport(a,"below"),o.insertAfter(a)))},this.after("initialize",function(){this.$body=t("body"),this.on("click",{buttonSelector:this.handleMove})})}var o=i("DBjh");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},rtvU:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({navContainerSelector:".MomentGuideNavigation-container",categorySelector:".MomentGuideNavigation-item--category",categoryLinkSelector:".MomentGuideNavigation-target--category",overflowMenuSelector:".MomentGuideNavigation-item--more",overflowMenuButtonSelector:".MomentGuideNavigation-target--more",overflowListSelector:".MomentGuideNavigation-overflowList",createButtonSelector:".MomentGuideNavigation-createButton",hiddenClass:"is-hidden",padding:5}),this.onCategoryClick=function(e){this.trigger("uiMomentsGuideCategoryClicked",this.getMomentScribeInfo(t(e.target)))},this.updateNavigation=function(){var t=this.$navContainer.width()-this.$overflowMenu.width()-this.getCreateButtonWidth()-this.attr.padding;this.$overflowList.empty();var e=this.findOverflowStartIndex(t);this.processCategories(e),this.updateOverflowMenu(e)},this.findOverflowStartIndex=function(t){for(var e=void 0,i=0,s=0;s<this.$categories.length;s++){if(e=this.$categories.eq(s),!(i+e.width()<=t))return s;i+=e.width()}return this.$categories.length},this.processCategories=function(e){var i=this;this.$categories.each(function(s,o){var n=t(o);i.toggleElement(n,s<e),s>=e&&i.addToOverflowList(n)})},this.addToOverflowList=function(e){var i=t("<li>").append(e.find(this.attr.categoryLinkSelector).clone().removeClass("u-textUserColorHover"));this.$overflowList.append(i)},this.updateOverflowMenu=function(t){var e=t<this.$categories.length,i=this.$overflowList.find(".is-active").length>0;this.$overflowMenuButton.toggleClass("u-textUserColor is-active",i),this.toggleElement(this.$overflowMenu,e)},this.getCreateButtonWidth=function(){return this.$createButton.length?this.$createButton.get(0).getBoundingClientRect().width:0},this.toggleElement=function(t,e){t.toggleClass(this.attr.hiddenClass,!e)},this.after("initialize",function(){this.$navContainer=this.select("navContainerSelector"),this.$categories=this.select("categorySelector"),this.$overflowMenu=this.select("overflowMenuSelector"),this.$overflowMenuButton=this.select("overflowMenuButtonSelector"),this.$overflowList=this.select("overflowListSelector"),this.$createButton=this.select("createButtonSelector"),this.updateNavigation(),this.on(window,"resize",n.default.throttle(this.updateNavigation.bind(this),10)),this.on("click",{categoryLinkSelector:this.onCategoryClick})})}var o=i("DBjh"),n=i("YzIt"),a=i("mGri"),r=i("Qs/v");e.a=Object(o.default)(s,a.a,r.a)}).call(e,i("4kSj"))},szK3:function(t,e,i){"use strict";(function(t){function s(){this.attributes({playableMediaSelector:".PlayableMedia"}),this.triggerEventOnPlayer=function(t,e,i){var s=this.getPlayerForEvent(t);s&&s.trigger(e,i)},this.playVideo=function(t,e){e.hasInteracted?this.triggerEventOnPlayer(t,"uiPlayMedia",e):this.triggerEventOnPlayer(t,"uiAutoplayMedia",e)},this.pauseVideo=function(t,e){e.hasInteracted?this.triggerEventOnPlayer(t,"uiPauseMedia"):this.triggerEventOnPlayer(t,"uiStopAutoplayingMedia",e)},this.muteVideo=function(t,e){this.triggerEventOnPlayer(t,"uiMuteMedia")},this.unmuteVideo=function(t,e){this.triggerEventOnPlayer(t,"uiUnmuteMedia")},this.getPlayerForEvent=function(e){var i=t(e.target);return i.is(this.attr.playableMediaSelector)?i:i.find(this.attr.playableMediaSelector)},this.after("initialize",function(){this.on("uiMomentMediaPlay",this.playVideo),this.on("uiMomentMediaPause",this.pauseVideo),this.on("uiMomentMediaMute",this.muteVideo),this.on("uiMomentMediaUnmute",this.unmuteVideo),this.on("uiMomentsHasInjectedNewItems","uiWatchAutoplayMedia"),this.on("uiMomentsHasInjectedNewItems uiMomentsHasRemovedItems","uiWatchPlayableMedia"),this.on("uiPlayableMediaPlaybackComplete","uiMomentMediaPlaybackComplete"),this.on("uiPlayableMediaReady","uiMomentMediaPlayerLoaded"),this.on("uiUnloadPlayableMedia","uiMomentMediaPlayerUnloaded"),this.on("uiAutoplayMedia","uiMomentVideoAutoplayStart"),this.on("uiStopAutoplayingMedia","uiMomentVideoAutoplayStop")})}var o=i("DBjh");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},tlYw:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({isFixedClass:"is-fixed",scrollTopTargetSelector:".MomentMakerRecommendations",scrollTopButtonSelector:".MomentMakerRecommendations-scrollTopButton",scrollTopThreshold:75}),this.scrollUp=function(){var t=this.$scrollTopTarget.offset().top-this.attr.scrollTopThreshold;this.$body.animate({scrollTop:t})},this.possiblyShowScrollTopButton=function(){var t=this.$body.scrollTop(),e=this.$scrollTopTarget.offset().top,i=e+this.$scrollTopTarget.height(),s=e<t&&t<i;this.$button.toggleClass(this.attr.isFixedClass,s)},this.after("initialize",function(){this.$body=t("body"),this.$button=this.select("scrollTopButtonSelector"),this.$scrollTopTarget=this.select("scrollTopTargetSelector"),this.on("click",{scrollTopButtonSelector:this.scrollUp}),this.on(document,"scroll",n.default.throttle(this.possiblyShowScrollTopButton.bind(this),10))})}var o=i("DBjh"),n=i("YzIt");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},uOOm:function(t,e,i){"use strict";(function(t){function s(){this.attributes({buttonSelector:".MomentLikeButton",likedSelector:".MomentLikeButton.is-liked",notLikedSelector:".MomentLikeButton.is-notLiked",likedStateClass:"is-liked",notLikedStateClass:"is-notLiked",momentIdAttr:"data-moment-id",loggedIn:!1}),this.triggerEvent=function(t,e,i){this.trigger(t,a({moment_id:e},this.getMomentScribeInfo(i)))},this.updateLikeButtons=function(t,e){var i="uiLikeMoment"===t;this.select("buttonSelector").filter('[data-moment-id="'+e+'"]').toggleClass(this.attr.notLikedStateClass,!i).toggleClass(this.attr.likedStateClass,i)},this.handleLikeUnlikeRollback=function(t,e,i){this.updateLikeButtons(t,i.momentId)},this.handleClick=function(e,i){i.stopPropagation();var s=t(i.target).closest(this.attr.buttonSelector),o=s.attr(this.attr.momentIdAttr);o&&(this.triggerEvent(e,o,s),this.updateLikeButtons(e,o))},this.after("initialize",function(){this.attr.loggedIn?(this.on("click",{notLikedSelector:this.handleClick.bind(this,"uiLikeMoment"),likedSelector:this.handleClick.bind(this,"uiUnlikeMoment")}),this.on(document,"dataMomentLikeError",this.handleLikeUnlikeRollback.bind(this,"uiUnlikeMoment")),this.on(document,"dataMomentUnlikeError",this.handleLikeUnlikeRollback.bind(this,"uiLikeMoment"))):this.on("click",{notLikedSelector:"uiOpenSignupDialog"})})}var o=i("DBjh"),n=i("Qs/v"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},vAT2:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({dataPreviewImageSrcAttr:"data-preview-image-src",maskedImageSelector:".MomentMakerMaskedImage",maskedImageClipSelector:".MomentMakerMaskedImage-imageClip",hasMaskClass:"has-mask"}),this.noCropPositionCss={top:"",left:"",height:"",width:""};var e={width:240,height:426},i={width:240,height:240};this.updatePreview=function(t,e){var i=e.helper.closest(this.attr.makerMediaItemSelector);this.setPreviewPosition(i)},this.getPreviewSrc=function(t){return t.find(this.attr.cropAreaSelector).attr(this.attr.dataPreviewImageSrcAttr)},this.setPreviewSrc=function(t){this.$imagePreview.attr("src",this.getPreviewSrc(t))},this.displayMaskedImage=function(e){var i=this.getPreviewSrc(e),s=t(n.a.render({url:i}));e.find(this.attr.maskedImageSelector).replaceWith(s)},this.removeMaskedImage=function(t){t.find(this.attr.maskedImageSelector).empty().removeClass(this.attr.hasMaskClass)},this.updateMaskedImage=function(t,e,i,s){var o=t.find(this.attr.maskedImageSelector),n=i.top,a=i.left,r=n+e.height,l=a+e.width,h=s?"":"rect("+n+"px, "+l+"px, "+r+"px, "+a+"px)";o.find(this.attr.maskedImageClipSelector).css({clip:h})},this.setPreviewPosition=function(t){var s=this,o="SQUARE"===this.currentCropMode,n=o?this.$squareImagePreview:this.$imagePreview,a=o?i:e;if(!this.writeFrameExists){this.writeFrameExists=!0;var r=t.find(this.attr.cropAreaSelector),l=t[0].getBoundingClientRect(),h=r[0].getBoundingClientRect(),c=r.position(),d=t.hasClass(this.attr.noCropClass),u=d?this.noCropPositionCss:this.calculatePreviewPosition(l,h,c,a);requestAnimationFrame(function(){n.css(u),s.updateMaskedImage(t,h,c,d),s.writeFrameExists=!1})}},this.calculatePreviewPosition=function(t,e,i,s){var o=this.calculatePreviewSize(t,e,s),n=this.calculatePreviewOffset(t,o,i);return{top:n.top,left:n.left,width:o.width,height:o.height}},this.calculatePreviewSize=function(t,e,i){return{width:t.width*i.width/e.width,height:t.height*i.height/e.height}},this.calculatePreviewOffset=function(t,e,i){return{left:-i.left*e.width/t.width,top:-i.top*e.height/t.height}},this.hidePreview=function(){this.$imagePreview.addClass("u-hidden")},this.showPreview=function(){this.$imagePreview.removeClass("u-hidden")},this.after("initialize",function(){this.writeFrameExists=!1,this.$imagePreview=this.select("previewImageSelector"),this.$squareImagePreview=this.select("squarePreviewImageSelector")})}var o=i("dCCo"),n=i.n(o);e.a=s}).call(e,i("4kSj"))},xvkc:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({momentId:null,sortButtonSelector:".MomentMakerSortMenu-sortButton",existingTweetsSelector:".MomentMakerPage-existingTweets",capsuleItemSelector:".MomentCapsuleItem"}),this.onSortButtonClicked=function(e,i){var s=t(e.target).attr("data-sort-by");this.trigger("uiMomentMakerSortMoment",{moment_id:this.attr.momentId,sort_by:s}),this.trigger("uiCloseDropdowns")},this.onSortMomentSuccess=function(t,e){e.html&&(this.trigger("uiMomentsDestroyCardsInContainer",{containerSelector:this.attr.existingTweetsSelector}),this.dom.$existingTweets.find(this.attr.capsuleItemSelector).remove(),this.dom.$existingTweets.append(e.html),this.dom.$existingTweets.trigger("uiMomentsHasInjectedNewItems"))},this.after("initialize",function(){this.dom={$existingTweets:t(this.attr.existingTweetsSelector)},this.on("click",{sortButtonSelector:this.onSortButtonClicked}),this.on(document,"dataMomentMakerSortMomentSuccess",this.onSortMomentSuccess)})}var o=i("DBjh"),n=i("mGri");e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},y8Xy:function(t,e,i){"use strict";(function(t){function s(){this.attributes({buttonSelector:".MomentFollowButton",followSelector:".MomentFollowButton.is-notFollowing",unfollowSelector:".MomentFollowButton.is-following",followingStateClass:"is-following",notFollowingStateClass:"is-notFollowing",momentIdAttr:"data-moment-id",loggedIn:!1}),this.handleFollowUnfollow=function(e,i){i.stopPropagation();var s="uiFollowMoment"===e,o=t(i.target).closest(this.attr.buttonSelector),n=o.attr(this.attr.momentIdAttr);n&&(this.trigger(e,a({moment_id:n},this.getMomentScribeInfo(o))),t(this.attr.buttonSelector).filter('[data-moment-id="'+n+'"]').toggleClass(this.attr.notFollowingStateClass,!s).toggleClass(this.attr.followingStateClass,s))},this.after("initialize",function(){this.attr.loggedIn?this.on("click ",{followSelector:this.handleFollowUnfollow.bind(this,"uiFollowMoment"),unfollowSelector:this.handleFollowUnfollow.bind(this,"uiUnfollowMoment")}):this.on("click",{followSelector:"uiOpenSignupDialog"})})}var o=i("DBjh"),n=i("Qs/v"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},ynl6:function(t,e,i){"use strict";(function(t){function s(){this.attributes({coverMediaSelector:".MomentCapsuleCover-media",tweetsContainerSelector:".MomentsPermalinkPage-tweets",isFixedClass:"is-fixed",topThreshold:46,bottomThreshold:180}),this.possiblyShowMenu=function(){var t=this.$window.scrollTop(),e=this.$coverMedia.offset().top-this.attr.topThreshold,i=this.$tweetsContainer.offset().top+this.$tweetsContainer.height()-this.attr.bottomThreshold,s=e<t&&t<i;this.$node.toggleClass(this.attr.isFixedClass,s)},this.after("initialize",function(){this.$window=t(window),this.$coverMedia=t(this.attr.coverMediaSelector),this.$tweetsContainer=t(this.attr.tweetsContainerSelector),this.on(document,"scroll",n.default.throttle(this.possiblyShowMenu.bind(this),10)),this.possiblyShowMenu()})}var o=i("DBjh"),n=i("YzIt");e.a=Object(o.default)(s)}).call(e,i("4kSj"))},zAui:function(t,e,i){"use strict";(function(t){function s(){this.viewportHelpers=r.a,this.defaultAttrs({tweetSelector:".tweet",cursorSelector:".ThreadedConversation-showMoreThreads",itemType:"tweet",checkVisibilityInterval:500}),this.checkTweetVisibility=function(){var e=this,i=this.allVisibleTweets(),s=i.map(function(t){return this.interactionDataWithCard(t)},this),o=this.select("cursorSelector").filter(function(i,s){r.a.isWithinBounds(e.$window,t(s))}).toArray().map(function(e){return{type:t(e).data("cursor-type-name"),cursor:t(e).find("[data-cursor]").data("cursor")}});this.trigger("uiTweetsVisible",{tweetData:s,cursorData:o})},this.allVisibleTweets=function(){var t=this.select("tweetSelector"),e=this.findVisibleTweet(t);if(-1===e)return[];for(var i=[],s=e;t[s]&&r.a.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s--;for(i.reverse(),s=e+1;t[s]&&r.a.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s++;return i},this.findVisibleTweet=function(t){var e=r.a.getContainerRect(this.$window);return this.findVisibleTweetRecursive(t.length,0,t,0,e)},this.findVisibleTweetRecursive=function(t,e,i,s,o){var n=Math.floor((t-e)/2+e);return n===e||s>100?-1:r.a.isAboveViewport(this.$window,i.eq(n),0,o)?this.findVisibleTweetRecursive(t,n,i,s+1,o):r.a.isBelowViewport(this.$window,i.eq(n),0,o)?this.findVisibleTweetRecursive(n,e,i,s+1,o):n},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.$window=t(window),this.pollingInterval=a.default.setIntervalEvent("uiCheckTweetVisibility",this.attr.checkVisibilityInterval),this.on(document,"uiCheckTweetVisibility",this.checkTweetVisibility)})}var o=i("DBjh"),n=i("alSu"),a=i("r8Bt"),r=i("/LRg");e.a=Object(o.default)(s,n.a)}).call(e,i("4kSj"))},zm5j:function(t,e,i){"use strict";(function(t){var i={scribeData:function(t){return{items:[{moments_details:t}]}},getClosestAttr:function(t,e){return t.closest("["+e+"]").attr(e)},getMomentMakerTopBarVisibility:function(){return t(".MomentMakerTopBar").attr("data-visibility-mode")}};e.a=i}).call(e,i("4kSj"))}});
//# sourceMappingURL=8.pages_moments.en.3bfd364c0bcbfe12d786.js.map